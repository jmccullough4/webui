"use strict";(self.webpackChunkwarhammer=self.webpackChunkwarhammer||[]).push([[415],{9415:(e,n,t)=>{t.r(n),t.d(n,{default:()=>co});var r=t(168),o=t(2791),s=t(9434),l=t(7689),i=t(5867),a=t(329),c=(t(5462),t(5302)),d=t(4988),u=t(3152),h=t(8655);const m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pausePolling:n=!1,...t}=e;return(0,u.a)({queryKey:["gsm-status"],queryFn:async()=>{const e=Date.now();try{const n=await(0,h.A4)(),t=Date.now()-e;return t>5e3&&console.warn("Slow GSM status response: ".concat(t,"ms")),n}catch(n){const t=Date.now()-e;if("Request timed out"===n.message)throw console.warn("GSM status query timed out after ".concat(t,"ms")),new Error("GSM status request timed out after ".concat(t,"ms"));throw console.error("GSM status query failed after ".concat(t,"ms:"),n),n}},refetchInterval:e=>{var t;if(n)return!1;const r=e.state.data,o=e.state.error,s=e.state.failureCount;return null!==o&&void 0!==o&&null!==(t=o.message)&&void 0!==t&&t.includes("timed out")||o&&s>1?Math.min(3e4*s,3e5):r?1e4:5e3},refetchIntervalInBackground:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:(e,n)=>{var t,r;return 401!==(null===n||void 0===n?void 0:n.status)&&403!==(null===n||void 0===n?void 0:n.status)&&(!(null!==n&&void 0!==n&&null!==(t=n.message)&&void 0!==t&&t.includes("timed out")&&e>=1)&&(!(null!==n&&void 0!==n&&null!==(r=n.message)&&void 0!==r&&r.includes("Network Error")&&e>=2)&&e<3))},retryDelay:e=>{const n=1e3*Math.pow(2,e),t=1e3*Math.random();return Math.min(n+t,3e4)},staleTime:5e3,gcTime:6e5,onError:e=>{var n;null!==(n=e.message)&&void 0!==n&&n.includes("timed out")?console.warn("GSM status query timed out:",e.message):console.error("GSM status query error:",e)},onSuccess:e=>{console.debug("GSM status updated:",e)},...t})};var p,x,g,v,f=t(6766),j=t(184);const b=i.ZP.div(p||(p=(0,r.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  margin-right: ",";\n  cursor: help;\n"])),(e=>{let{theme:n}=e;return n.spacing.medium})),y=i.ZP.div(x||(x=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n  height: 20px;\n  gap: 2px;\n"]))),w=i.ZP.div(g||(g=(0,r.Z)(["\n  width: 4px;\n  background-color: ",";\n  border: 1px solid ",";\n  \n  &:nth-child(1) { height: 5px; }\n  &:nth-child(2) { height: 10px; }\n  &:nth-child(3) { height: 15px; }\n  &:nth-child(4) { height: 20px; }\n"])),(e=>{let{active:n,connected:t,theme:r}=e;return t&&n?r.colors.accent:r.colors.background.surface}),(e=>{let{connected:n,theme:t}=e;return n?t.colors.accent:t.colors.text.muted})),P=i.ZP.div(v||(v=(0,r.Z)(["\n  position: absolute;\n  top: 30px;  /* Fixed distance above the icon */\n  right: 0;    /* Align with right edge of container */\n  color: ",";\n  padding: ",";\n  background: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  font-size: ",";\n  white-space: pre-line;\n  min-width: 200px;\n  max-width: 300px;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.2s ease-in-out;\n  z-index: 1000;\n\n  ",":hover & {\n    visibility: visible;\n    opacity: 1;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.shadows.medium}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),b),k=()=>{var e,n,t;const{isPollingPaused:r}=(0,f.h)(),{data:o,error:s,isLoading:l}=m({pausePolling:r}),i=(null===o||void 0===o||null===(e=o.signal)||void 0===e?void 0:e.quality)||(null===o||void 0===o?void 0:o.signal_quality),a=(e=>{if(!e&&0!==e)return 0;const n=String(e).replace(/[^0-9]/g,"");return n>=85?4:n>=70?3:n>=50?2:1})(i),c="CONNECTED"===(null===o||void 0===o||null===(n=o.status)||void 0===n?void 0:n.state)||"CONNECTED"===(null===o||void 0===o?void 0:o.state)||"connected"===(null===o||void 0===o||null===(t=o.status)||void 0===t?void 0:t.state)||"connected"===(null===o||void 0===o?void 0:o.state);return l?(0,j.jsxs)(b,{children:[(0,j.jsx)(y,{children:[1,2,3,4].map((e=>(0,j.jsx)(w,{active:!1,connected:!1},e)))}),(0,j.jsx)(P,{children:"Loading signal data..."})]}):s?(0,j.jsxs)(b,{children:[(0,j.jsx)(y,{children:[1,2,3,4].map((e=>(0,j.jsx)(w,{active:!1,connected:!1},e)))}),(0,j.jsx)(P,{children:"Error loading signal data"})]}):(0,j.jsxs)(b,{children:[(0,j.jsx)(y,{children:[1,2,3,4].map((e=>(0,j.jsx)(w,{active:e<=a,connected:c},e)))}),(0,j.jsx)(P,{children:(()=>{var e,n,t,r;if(!o)return"No signal data available";const s=(null===o||void 0===o||null===(e=o.status)||void 0===e?void 0:e.state)||(null===o||void 0===o?void 0:o.state)||"Unknown",l=(null===o||void 0===o||null===(n=o.network)||void 0===n?void 0:n.access_tech)||(null===o||void 0===o?void 0:o.access_tech)||"Unknown",a=(null===o||void 0===o||null===(t=o.network)||void 0===t?void 0:t.operator_name)||(null===o||void 0===o?void 0:o.operator_name)||"Unknown";let c="Status: ".concat(s,"\nNetwork: ").concat(l,"\nOperator: ").concat(a);if(i&&(c+="\nSignal Quality: ".concat(i)),null!==o&&void 0!==o&&null!==(r=o.signal)&&void 0!==r&&r.lte){const e=o.signal.lte;e.rssi&&(c+="\nRSSI: ".concat(e.rssi," dBm")),e.rsrp&&(c+="\nRSRP: ".concat(e.rsrp," dBm")),e.rsrq&&(c+="\nRSRQ: ".concat(e.rsrq," dB")),e.sn&&(c+="\nS/N: ".concat(e.sn," dB"))}return c})()})]})};var Z,S,C=t(763),_=t.n(C),I=t(4029),R=t(5085);const z=i.ZP.a(Z||(Z=(0,r.Z)(["\n  color: ",";\n  text-decoration: underline;\n  font-size: 0.9em;\n  margin-left: ",";\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 8px;\n  border-radius: ",";\n  \n  &:hover {\n    color: ",";\n    background: ",";\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.borderRadius.small}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.colors.background.surface})),E=i.ZP.div(S||(S=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n"]))),T=e=>{let{isOpen:n,onClose:t,title:r,leftPaneTitle:o,rightPaneTitle:s,leftPane:l,rightPane:i,singlePane:a}=e;return n?(0,j.jsx)(R.ZA,{onClick:t,children:(0,j.jsxs)(R.hz,{onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)(R.xB,{children:[(0,j.jsxs)(E,{children:[(0,j.jsx)(R.r6,{children:r}),(0,j.jsxs)(z,{href:"./wh_user_guide.pdf",target:"_blank",children:[(0,j.jsx)(I.NOg,{}),"User Guide"]})]}),(0,j.jsx)(R.PZ,{onClick:t,children:"\xd7"})]}),(0,j.jsxs)(R.c1,{singlePane:a,children:[(0,j.jsxs)(R.RJ,{children:[o&&(0,j.jsx)("h3",{children:o}),l]}),!a&&(0,j.jsxs)(R.RJ,{children:[(0,j.jsx)("h3",{children:s}),(0,j.jsx)(R.Hr,{}),i]})]})]})}):null};var N,A,D,M,U,F;const L=i.ZP.table(N||(N=(0,r.Z)(["\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0;\n  font-family: ",";\n"])),(e=>{let{theme:n}=e;return n.fonts.primary})),O=i.ZP.tbody(A||(A=(0,r.Z)(["\n  background-color: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface})),q=i.ZP.th(D||(D=(0,r.Z)(["\n  padding: 12px 15px;\n  text-align: left;\n  border-bottom: 1px solid #444;\n  color: ",";\n  font-weight: 500;\n  font-size: .75em;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  background: transparent;\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted})),B=i.ZP.tr(M||(M=(0,r.Z)(["\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.05);\n  }\n  \n  &.current-peer {\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n"]))),H=i.ZP.td(U||(U=(0,r.Z)(["\n  padding: 12px 15px;\n  border-bottom: 1px solid #333;\n  font-size: 0.85em;\n  color: ",";\n\n  a {\n    color: ",";\n    text-decoration: none;\n    font-weight: ",";\n    \n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.colors.text.hyperlink}),(e=>{let{theme:n}=e;return n.typography.weights.bold})),G=i.ZP.span(F||(F=(0,r.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin-right: 10px;\n  display: inline-block;\n  background-color: ",";\n"])),(e=>{switch(e.$status){case"connected":return"green";case"disconnected":return"red";default:return"gray"}}));var K=t(9035);const W=()=>({showSuccess:e=>{a.Am.success(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,transition:a.Mi})},showError:e=>{a.Am.error(e,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,transition:a.Mi})},showInfo:e=>{a.Am.info(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,transition:a.Mi})},showWarning:e=>{a.Am.warning(e,{position:"bottom-center",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,transition:a.Mi})}}),Q=e=>{let{isOpen:n,onClose:t}=e;const r=(0,s.I0)(),{canAccessRoutes:l}=(0,d.j)(),{isPollingPaused:i}=(0,f.h)(),a=(0,s.v9)((e=>e.vpn.peers))||[],c=(0,s.v9)((e=>e.vpn.routes))||[],{addingRoute:u,deletingRouteId:h,error:m}=(0,s.v9)((e=>e.vpn)),{showSuccess:p,showError:x}=W(),[g,v]=(0,o.useState)(""),[b,y]=(0,o.useState)(""),[w,P]=(0,o.useState)("");if((0,o.useEffect)((()=>{if(n&&l&&!i)return r((0,K.k5)()),r((0,K.sQ)()),()=>r((0,K.fw)())}),[n,r,l,i]),!l)return(0,j.jsx)(T,{isOpen:n,onClose:t,title:"Routes",leftPaneTitle:"Routes Management",leftPane:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center",color:"#aaa"},children:[(0,j.jsx)("h3",{children:"Feature Unavailable"}),(0,j.jsx)("p",{children:"Please activate your license to access route management."})]}),singlePane:!0});const k=(0,j.jsx)("div",{children:(0,j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),_().isEmpty(g)||_().isEmpty(b)||_().isEmpty(w)){const e="Network ID, Network, and Peer are required";return void r((0,K.sT)(e))}if(b.length>40){const e="Network ID must be 40 characters or less";return void r((0,K.sT)(e))}if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\/([0-9]|[1-2][0-9]|3[0-2]))$/.test(g.trim()))try{var n,t;const e={metric:9999,keep_route:!0,masquerade:!0,enabled:!0,peer:w,groups:(null===(n=a.find((e=>e.id===w)))||void 0===n||null===(t=n.groups)||void 0===t?void 0:t.map((e=>e.id)))||[]};await r((0,K.R_)({...e,network:g.trim(),network_id:b.trim()})).unwrap(),v(""),y(""),P(""),p("Route added successfully")}catch(m){console.error("Error updating routes:",m),x("Failed to add route: ".concat(m.message||"Unknown error"))}else{const e='Invalid CIDR value "'.concat(g,'". Must be in the format: 10.10.10.0/24');r((0,K.sT)(e))}},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{htmlFor:"peer",children:"Peer"}),(0,j.jsxs)(R.Ph,{id:"peer",value:w,onChange:e=>P(e.target.value),children:[(0,j.jsx)("option",{value:"",children:"Select a peer..."}),a.map((e=>(0,j.jsx)("option",{value:e.id,children:e.name.toUpperCase()},e.id)))]})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{htmlFor:"routeName",children:"Network ID"}),(0,j.jsx)(R.II,{id:"routeName",type:"text",placeholder:"Network ID",value:b,onChange:e=>y(e.target.value)})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{htmlFor:"network",children:"Network (CIDR)"}),(0,j.jsx)(R.II,{id:"network",type:"text",placeholder:"e.g., 192.168.1.0/24",value:g,onChange:e=>v(e.target.value)})]}),m&&(0,j.jsx)(R.cw,{children:(0,j.jsx)("div",{style:{color:"#dc3545"},children:m})}),(0,j.jsx)(R.zx,{type:"submit",disabled:u,children:u?"Adding Route...":"Add Route"})]})}),Z=(0,j.jsx)("div",{children:(0,j.jsxs)(L,{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(q,{children:"Peer Name"}),(0,j.jsx)(q,{children:"Network"}),(0,j.jsx)(q,{children:"Network ID"}),(0,j.jsx)(q,{children:"Actions"})]})}),(0,j.jsx)("tbody",{children:0===c.length?(0,j.jsx)(B,{children:(0,j.jsx)(H,{colSpan:4,children:"No routes available"})}):c.filter((e=>!(e.description&&e.description.split(",").some((e=>["persistent","ui_interface"].includes(e.trim())))))).sort(((e,n)=>{var t,r;const o=(null===(t=a.find((n=>n.id===e.peer)))||void 0===t?void 0:t.name.toUpperCase())||"",s=(null===(r=a.find((e=>e.id===n.peer)))||void 0===r?void 0:r.name.toUpperCase())||"";return o.localeCompare(s)})).map(((e,n)=>{var t;return(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:null===(t=a.find((n=>n.id===e.peer)))||void 0===t?void 0:t.name.toUpperCase()}),(0,j.jsx)(H,{children:e.network}),(0,j.jsx)(H,{children:e.network_id}),(0,j.jsx)(H,{children:(0,j.jsx)(R.zx,{$danger:!0,$last:!0,onClick:()=>(async e=>{try{await r((0,K.jK)(e)).unwrap(),p("Route deleted successfully")}catch(m){console.error("Error deleting route:",m),x("Failed to delete route: ".concat(m.message||"Unknown error"))}})(e.id),disabled:h,children:h===e.id?"Deleting...":"Delete"})})]},n)}))})]})});return(0,j.jsx)(T,{isOpen:n,onClose:t,title:"Manage Routes",leftPaneTitle:"Add New Route",rightPaneTitle:"Existing Routes",leftPane:k,rightPane:Z})};var J=t(3713),V=t(3715);const $=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pausePolling:n=!1,...t}=e;return(0,u.a)({queryKey:["network-interfaces"],queryFn:async()=>{const e=Date.now();try{const n=await(0,h.sn)(),t=Date.now()-e;return t>5e3&&console.warn("Slow network interfaces response: ".concat(t,"ms")),n}catch(n){const t=Date.now()-e;if("Request timed out"===n.message)throw console.warn("Network interfaces query timed out after ".concat(t,"ms")),new Error("Network interfaces request timed out after ".concat(t,"ms"));throw console.error("Network interfaces query failed after ".concat(t,"ms:"),n),n}},refetchInterval:e=>{var t;if(n)return!1;const r=e.state.data,o=e.state.error,s=e.state.failureCount;return null!==o&&void 0!==o&&null!==(t=o.message)&&void 0!==t&&t.includes("timed out")||o&&s>1?Math.min(3e4*s,3e5):r?1e4:5e3},refetchIntervalInBackground:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:(e,n)=>{var t,r;return 401!==(null===n||void 0===n?void 0:n.status)&&403!==(null===n||void 0===n?void 0:n.status)&&(!(null!==n&&void 0!==n&&null!==(t=n.message)&&void 0!==t&&t.includes("timed out")&&e>=1)&&(!(null!==n&&void 0!==n&&null!==(r=n.message)&&void 0!==r&&r.includes("Network Error")&&e>=2)&&e<3))},retryDelay:e=>{const n=1e3*Math.pow(2,e),t=1e3*Math.random();return Math.min(n+t,3e4)},staleTime:5e3,gcTime:6e5,onError:e=>{var n;null!==(n=e.message)&&void 0!==n&&n.includes("timed out")?console.warn("Network interfaces query timed out:",e.message):console.error("Network interfaces query error:",e)},onSuccess:e=>{console.debug("Network interfaces updated:",e)},...t})},Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pausePolling:n=!1,...t}=e;return(0,u.a)({queryKey:["gsm-connections"],queryFn:async()=>{const e=Date.now();try{const n=await(0,h.ox)(),t=Date.now()-e;return t>5e3&&console.warn("Slow GSM connections response: ".concat(t,"ms")),n}catch(n){const t=Date.now()-e;if("Request timed out"===n.message)throw console.warn("GSM connections query timed out after ".concat(t,"ms")),new Error("GSM connections request timed out after ".concat(t,"ms"));throw console.error("GSM connections query failed after ".concat(t,"ms:"),n),n}},refetchInterval:e=>{var t;if(n)return!1;const r=e.state.data,o=e.state.error,s=e.state.failureCount;return null!==o&&void 0!==o&&null!==(t=o.message)&&void 0!==t&&t.includes("timed out")||o&&s>1?Math.min(3e4*s,3e5):r?1e4:5e3},refetchIntervalInBackground:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:(e,n)=>{var t,r;return 401!==(null===n||void 0===n?void 0:n.status)&&403!==(null===n||void 0===n?void 0:n.status)&&(!(null!==n&&void 0!==n&&null!==(t=n.message)&&void 0!==t&&t.includes("timed out")&&e>=1)&&(!(null!==n&&void 0!==n&&null!==(r=n.message)&&void 0!==r&&r.includes("Network Error")&&e>=2)&&e<3))},retryDelay:e=>{const n=1e3*Math.pow(2,e),t=1e3*Math.random();return Math.min(n+t,3e4)},staleTime:5e3,gcTime:6e5,onError:e=>{var n;null!==(n=e.message)&&void 0!==n&&n.includes("timed out")?console.warn("GSM connections query timed out:",e.message):console.error("GSM connections query error:",e)},onSuccess:e=>{console.debug("GSM connections updated:",e)},...t})},X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pausePolling:n=!1,...t}=e;return(0,u.a)({queryKey:["bridged-status"],queryFn:async()=>{const e=Date.now();try{const n=await(0,h.xJ)(),t=Date.now()-e;return t>5e3&&console.warn("Slow bridged status response: ".concat(t,"ms")),null===n||void 0===n?void 0:n.bridged}catch(n){const t=Date.now()-e;if("Request timed out"===n.message)throw console.warn("Bridged status query timed out after ".concat(t,"ms")),new Error("Bridged status request timed out after ".concat(t,"ms"));throw console.error("Bridged status query failed after ".concat(t,"ms:"),n),n}},refetchInterval:e=>{var t;if(n)return!1;const r=e.state.data,o=e.state.error,s=e.state.failureCount;return null!==o&&void 0!==o&&null!==(t=o.message)&&void 0!==t&&t.includes("timed out")||o&&s>1?Math.min(3e4*s,3e5):r?1e4:5e3},refetchIntervalInBackground:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:(e,n)=>{var t,r;return 401!==(null===n||void 0===n?void 0:n.status)&&403!==(null===n||void 0===n?void 0:n.status)&&(!(null!==n&&void 0!==n&&null!==(t=n.message)&&void 0!==t&&t.includes("timed out")&&e>=1)&&(!(null!==n&&void 0!==n&&null!==(r=n.message)&&void 0!==r&&r.includes("Network Error")&&e>=2)&&e<3))},retryDelay:e=>{const n=1e3*Math.pow(2,e),t=1e3*Math.random();return Math.min(n+t,3e4)},staleTime:5e3,gcTime:6e5,onError:e=>{var n;null!==(n=e.message)&&void 0!==n&&n.includes("timed out")?console.warn("Bridged status query timed out:",e.message):console.error("Bridged status query error:",e)},onSuccess:e=>{console.debug("Bridged status updated:",e)},...t})};var ee=t(8556);var ne,te,re,oe,se;const le=i.ZP.div(ne||(ne=(0,r.Z)(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  padding: ",";\n  margin: "," 0;\n  max-height: 400px;\n  overflow-y: auto;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 12px;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-word;\n"])),(e=>{let{theme:n}=e;return n.colors.background.base}),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.medium})),ie=i.ZP.pre(te||(te=(0,r.Z)(["\n  color: ",";\n  margin: 0;\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary})),ae=i.ZP.div(re||(re=(0,r.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large})),ce=(0,i.ZP)(R.zx)(oe||(oe=(0,r.Z)(["\n  margin-right: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium})),de=i.ZP.div(se||(se=(0,r.Z)(["\n  color: ",";\n  font-size: ",";\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.medium})),ue=e=>{let{isOpen:n,onClose:t,data:r,title:o="JSON Data"}=e;const{showSuccess:s,showError:l}=W();return n?(0,j.jsx)(R.ZA,{onClick:t,children:(0,j.jsxs)(R.hz,{onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)(R.xB,{children:[(0,j.jsx)(R.r6,{children:o}),(0,j.jsx)(R.PZ,{onClick:t,children:"\xd7"})]}),(0,j.jsx)(de,{children:"This is the complete cellular status data from the server API, including hardware information, network details, signal metrics, SIM data, and system configuration."}),(0,j.jsx)(le,{children:(0,j.jsx)(ie,{children:JSON.stringify(r,null,2)})}),(0,j.jsxs)(ae,{children:[(0,j.jsx)(ce,{onClick:()=>{try{const e=JSON.stringify(r,null,2);navigator.clipboard.writeText(e),s("JSON data copied to clipboard")}catch(e){console.error("Failed to copy to clipboard:",e),l("Failed to copy to clipboard")}},children:"Copy to Clipboard"}),(0,j.jsx)(R.zx,{onClick:t,children:"Close"})]})]})}):null};var he,me,pe,xe,ge,ve,fe,je;const be=i.ZP.div(he||(he=(0,r.Z)(["\n  margin-bottom: ",";\n\n  h4 {\n    color: ",";\n    font-size: 1em;\n    font-weight: 500;\n    letter-spacing: 1px;\n    margin-bottom: ",";\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.small})),ye=i.ZP.div(me||(me=(0,r.Z)(["\n  display: flex;\n  justify-content: center;\n  padding: "," 0;\n\n  button {\n    min-width: 200px;\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.medium})),we=i.ZP.button(pe||(pe=(0,r.Z)(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  padding: 0 4px;\n  font-size: 14px;\n  opacity: 0.8;\n\n  &:hover {\n    opacity: 1;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.danger})),Pe=i.ZP.div(xe||(xe=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n\n  label {\n    color: ",";\n    font-size: ",";\n  }\n\n  span {\n    color: ",";\n    font-weight: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.typography.weights.medium})),ke=e=>{let{interfaceName:n,currentIps:t,onUpdate:r,isLoading:s,isDhcpEnabled:l}=e;const[i,a]=o.useState(t),[c,d]=o.useState(""),[u,h]=o.useState("");return(0,j.jsx)("div",{style:{padding:"8px",backgroundColor:"#f8f9fa",borderRadius:"4px",border:"1px solid #dee2e6"},children:l?(0,j.jsx)("div",{style:{textAlign:"center",color:"#666",fontSize:"10px"},children:"Disable DHCP first to configure static IPs"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,j.jsxs)("div",{style:{display:"flex",gap:"4px",marginBottom:"4px"},children:[(0,j.jsx)(R.II,{type:"text",placeholder:"192.168.1.100",value:c,onChange:e=>d(e.target.value),style:{fontSize:"10px",padding:"2px 4px",height:"20px"}}),(0,j.jsx)(R.zx,{onClick:()=>{c.trim()&&(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(c.trim())?(h(""),a([...i,c.trim()]),d("")):h("Invalid IP address format"))},disabled:!c.trim(),style:{fontSize:"10px",padding:"2px 6px",height:"20px",minWidth:"auto"},children:"+"})]}),u&&(0,j.jsx)("div",{style:{color:"red",fontSize:"9px"},children:u})]}),(0,j.jsx)("div",{style:{marginBottom:"8px"},children:i.map(((e,n)=>(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[(0,j.jsx)("span",{style:{fontSize:"10px",color:"#666"},children:e}),(0,j.jsx)("button",{onClick:()=>{return n=e,void a(i.filter((e=>e!==n)));var n},style:{background:"none",border:"none",color:"#dc3545",cursor:"pointer",fontSize:"8px",padding:"0 2px"},title:"Remove IP",children:"\xd7"})]},n)))}),(0,j.jsx)(R.zx,{onClick:()=>{r(n,i)},disabled:s,style:{fontSize:"10px",padding:"2px 6px",height:"20px",minWidth:"auto"},children:s?"Saving...":"Save"})]})})},Ze=i.ZP.div(ge||(ge=(0,r.Z)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: ",";\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.medium})),Se=i.ZP.a(ve||(ve=(0,r.Z)(["\n  color: ",";\n  text-decoration: none;\n  cursor: pointer;\n  font-size: ",";\n  display: flex;\n  align-items: center;\n  gap: ",";\n  opacity: 0.8;\n  transition: opacity 0.2s ease;\n\n  &:hover {\n    opacity: 1;\n    text-decoration: underline;\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    pointer-events: none;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.accent}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.small})),Ce=(0,i.ZP)(Pe)(fe||(fe=(0,r.Z)(["\n  grid-column: 1 / -1;\n  text-align: center;\n  border-top: 1px solid ",";\n  padding-top: ",";\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  gap: ",";\n  \n  label {\n    display: none;\n  }\n  \n  span {\n    margin: 0;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.small})),_e=(i.ZP.div(je||(je=(0,r.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium})),e=>{var n,t,r,l,i,a,c,u,p,x,g,v,b;let{isOpen:y,onClose:w}=e;const P=(0,s.I0)(),{canAccessNetwork:k}=(0,d.j)(),{showSuccess:Z,showError:S}=W(),C=(0,J.NL)(),{isPollingPaused:I,pausePolling:z,resumePolling:E}=(0,f.h)(),[N,A]=(0,o.useState)(""),[D,M]=(0,o.useState)({name:"",apn:"",username:"",password:""}),[U,F]=(0,o.useState)(null),[O,G]=(0,o.useState)(!1),[K,Q]=(0,o.useState)(!1),{data:ne,isLoading:te,error:re}=m({pausePolling:I}),{data:oe,isLoading:se,error:le}=Y({pausePolling:I}),{data:ie,isLoading:ae,error:ce}=X({pausePolling:I}),de=(()=>{const e=(0,J.NL)();return(0,ee.D)({mutationFn:e=>{let{interfaceName:n,mode:t}=e;return(0,h.mb)(n,t)},onSuccess:(n,t)=>{let{interfaceName:r}=t;e.invalidateQueries({queryKey:["ethernet-interface-status",r]}),e.invalidateQueries({queryKey:["network-interfaces"]})},onError:e=>{console.error("Ethernet mode update failed:",e)}})})(),he=(()=>{const e=(0,J.NL)();return(0,ee.D)({mutationFn:e=>{let{interfaceName:n,staticIps:t}=e;return(0,h.sx)(n,t)},onSuccess:(n,t)=>{let{interfaceName:r}=t;e.invalidateQueries({queryKey:["ethernet-interface-status",r]}),e.invalidateQueries({queryKey:["network-interfaces"]})},onError:e=>{console.error("Ethernet static IP update failed:",e)}})})(),{data:me,isLoading:pe,error:xe}=$({pausePolling:I});o.useEffect((()=>{y&&P((0,V.fw)())}),[y,P]);const ge=async(e,n)=>{try{z(),await he.mutateAsync({interfaceName:e,staticIps:n}),Z("".concat(e," static IPs updated successfully"))}catch(t){S("Failed to update ".concat(e," static IPs: ").concat(t.message||"Unknown error")),console.error("Failed to update ".concat(e," static IPs:"),t)}finally{E()}};if(!k)return(0,j.jsx)(T,{isOpen:y,onClose:w,title:"Network Settings",leftPaneTitle:"Network Management",leftPane:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center",color:"#aaa"},children:[(0,j.jsx)("h3",{children:"Feature Unavailable"}),(0,j.jsx)("p",{children:"Please activate your license to access network management."})]}),singlePane:!0});const ve=(0,j.jsxs)("div",{children:[(0,j.jsx)(be,{children:(0,j.jsx)(ye,{children:(0,j.jsx)(R.zx,{onClick:async()=>{try{Q(!0),z(),await P((0,V.m5)(ie)).unwrap(),Z("Network bridge was successfully ".concat(ie?"disabled":"enabled")),C.invalidateQueries({queryKey:["bridged-status"]}),C.invalidateQueries({queryKey:["network-interfaces"]})}catch(e){S("Failed to ".concat(ie?"disable":"enable"," network bridge: ").concat(e.message||"Unknown error")),console.error("Failed to toggle bridge:",e)}finally{Q(!1),E()}},disabled:K,children:K?"Updating...":ie?"Disable Bridge":"Enable Bridge"})})}),(0,j.jsxs)(be,{children:[(0,j.jsx)("h4",{children:"IP Addresses & DHCP"}),(0,j.jsx)(R.Hr,{}),(0,j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),N)if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(N))try{await P((0,V.Qz)({interfaceName:"br0",ip:N})).unwrap(),Z('IP "'.concat(N,'" was successfully added')),A(""),C.invalidateQueries({queryKey:["network-interfaces"]})}catch(n){S("Failed to add IP: ".concat(n.message||"Unknown error")),console.error("Failed to add IP:",n)}else F("Invalid IP address")},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"IP Address"}),(0,j.jsx)(R.II,{type:"text",placeholder:"e.g. 192.168.1.1",value:N,onChange:e=>{A(e.target.value),F(null)}}),U&&(0,j.jsx)("p",{style:{color:"red"},children:U})]}),(0,j.jsx)(R.zx,{type:"submit",disabled:pe,children:pe?"Adding IP...":"Add IP"})]}),(0,j.jsxs)(L,{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(q,{children:"Interface"}),(0,j.jsx)(q,{children:"IP Addresses"}),(0,j.jsx)(q,{children:"DHCP"})]})}),(0,j.jsx)("tbody",{children:me&&Object.values(me).sort(((e,n)=>(e.order||999)-(n.order||999))).map((e=>{var n;return(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:e.display_name}),(0,j.jsx)(H,{children:_().without(null===e||void 0===e?void 0:e.addresses,..._().get(e,"hidden_addresses",[])).map(((n,t)=>(0,j.jsxs)("div",{children:[n,e.editable&&!_().includes(e.immutable_addresses,n)&&(0,j.jsx)(we,{onClick:()=>(async(e,n)=>{try{await P((0,V.v)({interfaceName:e,ip:n})).unwrap(),Z('IP "'.concat(n,'" was successfully removed')),C.invalidateQueries({queryKey:["network-interfaces"]})}catch(t){S("Failed to remove IP: ".concat(t.message||"Unknown error")),console.error("Failed to remove IP:",t)}})(e.interface_name,n),disabled:pe,title:"Remove IP",children:pe?"deleting...":"delete"})]},n)))}),(0,j.jsx)(H,{children:"br0"===e.interface_name||null!==(n=e.interface_name)&&void 0!==n&&n.startsWith("enp")?(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{style:{marginBottom:"8px",fontSize:"12px",color:"#666"},children:e.dhcp_enabled?"DHCP Enabled":"Static IP (".concat((e.addresses||[]).length," configured)")}),e.warning&&(0,j.jsx)("div",{style:{padding:"6px",marginBottom:"8px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",color:"#856404",fontSize:"11px"},children:e.warning}),(0,j.jsx)(R.zx,{onClick:()=>(async(e,n)=>{try{z();const t=n?"static":"dhcp";await de.mutateAsync({interfaceName:e,mode:t}),Z("".concat(e," was successfully set to ").concat(t," mode"))}catch(t){S("Failed to set ".concat(e," mode: ").concat(t.message||"Unknown error")),console.error("Failed to set ".concat(e," mode:"),t)}finally{E()}})(e.interface_name,e.dhcp_enabled),disabled:pe||de.isPending||!e.is_safe_to_modify,style:{fontSize:"11px",padding:"4px 8px",backgroundColor:e.dhcp_enabled?"#f44336":"#4CAF50",color:"white",border:"none"},children:pe||de.isPending?"Updating...":e.is_safe_to_modify?e.dhcp_enabled?"Disable DHCP":"Enable DHCP":"Unsafe"}),(0,j.jsx)("div",{style:{marginTop:"8px",fontSize:"11px"},children:(0,j.jsxs)("details",{style:{cursor:"pointer"},children:[(0,j.jsx)("summary",{style:{color:"#666",marginBottom:"4px"},children:e.dhcp_enabled?"Static IPs (DHCP Enabled)":"Static IPs (".concat((e.addresses||[]).length," configured)")}),(0,j.jsx)(ke,{interfaceName:e.interface_name,currentIps:e.addresses||[],onUpdate:ge,isLoading:he.isPending,isDhcpEnabled:e.dhcp_enabled})]})}),I&&(de.isPending||he.isPending)&&(0,j.jsx)("div",{style:{marginTop:"6px",padding:"4px",backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"3px",color:"#1976d2",fontSize:"10px",textAlign:"center"},children:"\u23f8\ufe0f Polling paused during network configuration..."})]}):(0,j.jsx)("span",{style:{color:"#999",fontSize:"12px"},children:"N/A"})})]},e.interface_name)}))})]})]})]}),fe=(0,j.jsxs)("div",{children:[(0,j.jsxs)(be,{children:[(0,j.jsxs)(Ze,{children:[(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Status"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(n=ne.status)||void 0===n?void 0:n.state)||(null===ne||void 0===ne?void 0:ne.state)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Network Type"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(t=ne.network)||void 0===t?void 0:t.access_tech)||(null===ne||void 0===ne?void 0:ne.access_tech)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Operator"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(r=ne.network)||void 0===r?void 0:r.operator_name)||(null===ne||void 0===ne?void 0:ne.operator_name)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Signal Quality"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(l=ne.signal)||void 0===l?void 0:l.quality)||(null===ne||void 0===ne?void 0:ne.signal_quality)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Power State"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(i=ne.status)||void 0===i?void 0:i.power_state)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Registration"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(a=ne.status)||void 0===a?void 0:a.registration)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"IMEI"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(c=ne.hardware)||void 0===c?void 0:c.imei)||(null===ne||void 0===ne?void 0:ne.imei)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"IMSI"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(u=ne.sim)||void 0===u?void 0:u.imsi)||(null===ne||void 0===ne?void 0:ne.imsi)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Phone Number"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(p=ne.network)||void 0===p?void 0:p.phone_number)||(null===ne||void 0===ne?void 0:ne.phone_number)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Manufacturer"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(x=ne.hardware)||void 0===x?void 0:x.manufacturer)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Model"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(g=ne.hardware)||void 0===g?void 0:g.model)||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Firmware"}),(0,j.jsx)("span",{children:(null===ne||void 0===ne||null===(v=ne.hardware)||void 0===v?void 0:v.firmware_revision)||"-"})]}),(0,j.jsx)(Ce,{children:(0,j.jsxs)(Se,{onClick:e=>{e.preventDefault(),G(!0)},style:{pointerEvents:te||!ne?"none":"auto"},children:[(0,j.jsx)("span",{children:"<>"}),(0,j.jsx)("span",{children:"View Raw JSON Data"})]})})]}),(null===ne||void 0===ne||null===(b=ne.signal)||void 0===b?void 0:b.lte)&&Object.keys(ne.signal.lte).length>0&&(0,j.jsxs)(be,{children:[(0,j.jsx)("h4",{children:"LTE Signal Details"}),(0,j.jsx)(R.Hr,{}),(0,j.jsxs)(Ze,{children:[ne.signal.lte.rssi&&(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"RSSI"}),(0,j.jsxs)("span",{children:[ne.signal.lte.rssi," dBm"]})]}),ne.signal.lte.rsrq&&(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"RSRQ"}),(0,j.jsxs)("span",{children:[ne.signal.lte.rsrq," dB"]})]}),ne.signal.lte.rsrp&&(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"RSRP"}),(0,j.jsxs)("span",{children:[ne.signal.lte.rsrp," dBm"]})]}),ne.signal.lte.sn&&(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Signal/Noise"}),(0,j.jsxs)("span",{children:[ne.signal.lte.sn," dB"]})]})]})]}),(null===ne||void 0===ne?void 0:ne.sim)&&(0,j.jsxs)(be,{children:[(0,j.jsx)("h4",{children:"SIM Information"}),(0,j.jsx)(R.Hr,{}),(0,j.jsxs)(Ze,{children:[(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Active"}),(0,j.jsx)("span",{children:"yes"===ne.sim.active?"Yes":"No"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"ICCID"}),(0,j.jsx)("span",{children:ne.sim.iccid||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Operator"}),(0,j.jsx)("span",{children:ne.sim.operator_name||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Operator ID"}),(0,j.jsx)("span",{children:ne.sim.operator_id||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Emergency Numbers"}),(0,j.jsx)("span",{children:ne.sim.emergency_numbers||"-"})]}),(0,j.jsxs)(Pe,{children:[(0,j.jsx)("label",{children:"Group ID"}),(0,j.jsx)("span",{children:ne.sim.gid1||"-"})]})]})]})]}),(0,j.jsxs)(be,{children:[(0,j.jsx)("h4",{children:"APN Configuration"}),(0,j.jsx)(R.Hr,{}),(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await P((0,V.BV)(_().pickBy(D))).unwrap(),M({name:"",apn:"",username:"",password:""}),Z('APN "'.concat(D.name,'" was successfully added'))}catch(n){S("Failed to add APN: ".concat(n.message||"Unknown error")),console.error("Failed to add connection:",n)}},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Name"}),(0,j.jsx)(R.II,{type:"text",value:D.name,onChange:e=>M({...D,name:e.target.value})})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"APN"}),(0,j.jsx)(R.II,{type:"text",value:D.apn,onChange:e=>M({...D,apn:e.target.value})})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Username"}),(0,j.jsx)(R.II,{type:"text",value:D.username,onChange:e=>M({...D,username:e.target.value})})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Password"}),(0,j.jsx)(R.II,{type:"password",value:D.password,onChange:e=>M({...D,password:e.target.value})})]}),(0,j.jsx)(R.zx,{type:"submit",disabled:se,children:se?"Adding APN...":"Add APN"})]}),(0,j.jsxs)(L,{children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(q,{children:"Name"}),(0,j.jsx)(q,{children:"Status"}),(0,j.jsx)(q,{children:"Actions"})]})}),(0,j.jsx)("tbody",{children:null===oe||void 0===oe?void 0:oe.map((e=>(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:e.name}),(0,j.jsx)(H,{children:e.connected?"Connected":"Disconnected"}),(0,j.jsxs)(H,{children:[(0,j.jsx)(R.zx,{onClick:()=>(async e=>{try{await P((0,V.sH)({name:e.name,connected:e.connected})).unwrap(),Z("".concat(e.name," was successfully ").concat(e.connected?"disconnected":"connected"))}catch(n){S("Failed to ".concat(e.connected?"disconnect":"connect"," ").concat(e.name,": ").concat(n.message||"Unknown error")),console.error("Failed to toggle connection:",n)}})(e),disabled:se,children:e.connected?"Disconnect":"Connect"}),(0,j.jsx)(R.zx,{$last:!0,onClick:()=>(async e=>{try{await P((0,V.u2)(e.name)).unwrap(),Z('APN "'.concat(e.name,'" was successfully deleted'))}catch(n){S('Failed to delete APN "'.concat(e.name,'": ').concat(n.message||"Unknown error")),console.error("Failed to delete connection:",n)}})(e),disabled:se,children:se?"Deleting...":"Delete"})]})]},e.connection_id)))})]})]})]});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(T,{isOpen:y,onClose:w,title:"Network Settings",leftPaneTitle:"Network Mode",rightPaneTitle:"Cellular APN Configuration",leftPane:ve,rightPane:fe}),(0,j.jsx)(ue,{isOpen:O,onClose:()=>G(!1),data:ne,title:"Cellular Status - Complete JSON Data"})]})});var Ie,Re,ze,Ee=t(3879);const Te=i.ZP.div(Ie||(Ie=(0,r.Z)(["\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large})),Ne=(0,i.ZP)(H)(Re||(Re=(0,r.Z)(["\n  span {\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.large})),Ae=i.ZP.h4(ze||(ze=(0,r.Z)(["\n  margin-bottom: ",";\n  color: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.text.primary})),De=e=>{var n,t,r,l,i,a,c,u,h,m,p,x;let{isOpen:g,onClose:v}=e;const b=(0,s.I0)(),{canAccessPerformance:y}=(0,d.j)(),{isPollingPaused:w}=(0,f.h)(),P=(0,s.v9)((e=>e.vpn.peers)),k=(0,s.v9)((e=>e.vpn.routes)),{running:Z,testResult:S,error:C}=(0,s.v9)((e=>e.performance)),{showSuccess:I,showError:z}=W(),[E,N]=(0,o.useState)({id:"",ip:""});if((0,o.useEffect)((()=>{if(g&&y&&!w)return b((0,K.k5)()),b((0,K.sQ)()),()=>b((0,Ee.xe)())}),[g,b,y,w]),!y)return(0,j.jsx)(T,{isOpen:g,onClose:v,title:"Network Performance",leftPaneTitle:"Speed Test",leftPane:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center",color:"#aaa"},children:[(0,j.jsx)("h3",{children:"Feature Unavailable"}),(0,j.jsx)("p",{children:"Please activate your license to access performance testing."})]}),singlePane:!0});const A=P.filter((e=>e.connected)),D=(0,j.jsxs)("div",{children:[(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b((0,Ee.kn)(E.ip)),I("Performance test started")},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Select Peer"}),(0,j.jsxs)(R.Ph,{value:E.id,onChange:e=>{var n;const t=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value,r=_().find(P,{id:t}),o=k.filter((e=>e.peer===(null===r||void 0===r?void 0:r.id))),s=_().find(o,(e=>_().includes(_().split(null===e||void 0===e?void 0:e.description,","),"ui_interface"))),l=_().get(s,"network",null===r||void 0===r?void 0:r.ip);console.log("peer ip",l),console.log("peer",r),console.log("peerRoutes",o),N({id:t,ip:_().split(l,"/")[0]})},children:[(0,j.jsx)("option",{value:"",children:"Select peer..."}),A.map((e=>(0,j.jsx)("option",{value:e.id,children:(null===e||void 0===e?void 0:e.name)||"Peer ".concat(e.id)},e.id)))]})]}),(0,j.jsx)(R.zx,{type:"submit",disabled:!E.id||Z,children:Z?"Running Test...":"Run Test"})]}),S&&(0,j.jsxs)(Te,{children:[(0,j.jsx)(Ae,{children:"Test Results"}),(0,j.jsx)(R.Hr,{}),(0,j.jsx)(L,{children:(0,j.jsxs)("tbody",{children:[(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:(0,j.jsx)("strong",{children:"Timestamp"})}),(0,j.jsx)(H,{children:null===S||void 0===S||null===(n=S.start)||void 0===n||null===(t=n.timestamp)||void 0===t?void 0:t.time})]}),(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:(0,j.jsx)("strong",{children:"Remote Host"})}),(0,j.jsx)(H,{children:null===S||void 0===S||null===(r=S.start)||void 0===r||null===(l=r.connecting_to)||void 0===l?void 0:l.host})]}),(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:(0,j.jsx)("strong",{children:"Number of Streams"})}),(0,j.jsx)(H,{children:null===S||void 0===S||null===(i=S.start)||void 0===i||null===(a=i.test_start)||void 0===a?void 0:a.num_streams})]}),(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:(0,j.jsx)("strong",{children:"Test Duration"})}),(0,j.jsxs)(H,{children:[null===S||void 0===S||null===(c=S.start)||void 0===c||null===(u=c.test_start)||void 0===u?void 0:u.duration,"s"]})]}),(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:(0,j.jsx)("strong",{children:"Throughput"})}),(0,j.jsxs)(Ne,{children:[(0,j.jsxs)("span",{children:["\u2193 ",((null===S||void 0===S||null===(h=S.end)||void 0===h||null===(m=h.sum_received)||void 0===m?void 0:m.bits_per_second)/1e6).toFixed(2)," Mbits/s"]}),(0,j.jsxs)("span",{children:["\u2191 ",((null===S||void 0===S||null===(p=S.end)||void 0===p||null===(x=p.sum_sent)||void 0===x?void 0:x.bits_per_second)/1e6).toFixed(2)," Mbits/s"]})]})]})]})})]})]});return(0,j.jsx)(T,{isOpen:g,onClose:v,title:"Network Performance",leftPaneTitle:"Speed Test",rightPaneTitle:"",leftPane:D,rightPane:null,singlePane:!0})};var Me,Ue,Fe,Le,Oe,qe=t(9899);const Be=i.ZP.div(Me||(Me=(0,r.Z)(["\n  display: flex;\n  gap: 1rem;\n  align-items: flex-end;\n  margin-bottom: 1rem;\n"]))),He=(0,i.ZP)(R.cw)(Ue||(Ue=(0,r.Z)(["\n  margin: 0;\n  flex: 1;\n"]))),Ge=i.ZP.div(Fe||(Fe=(0,r.Z)(["\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n  height: 100%;\n"]))),Ke=i.ZP.div(Le||(Le=(0,r.Z)(["\n  display: flex;\n  gap: 1rem;\n  padding: 1rem;\n  background: ",";\n  border-top: 1px solid ",";\n"])),(e=>{let{theme:n}=e;return n.colors.background.lighter}),(e=>{let{theme:n}=e;return n.colors.border})),We=(0,i.ZP)(He)(Oe||(Oe=(0,r.Z)(["\n  margin-bottom: 0;\n"]))),Qe=()=>{const{userInfo:e}=(0,c.a)(),{userId:n}=e,t=(0,s.I0)(),{showSuccess:r,showError:l}=W(),i=(0,s.v9)((e=>e.users.data)),a=(0,s.v9)((e=>e.users.creatingUser)),d=(0,s.v9)((e=>e.users.createError)),[u,h]=(0,o.useState)({username:"",password:"",confirmPassword:""}),[m,p]=(0,o.useState)(!1),[x,g]=(0,o.useState)(null),[v,f]=(0,o.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),b=e=>n=>{p(!1),t((0,qe.fw)()),h((t=>({...t,[e]:n.target.value})))},y=e=>n=>{t((0,qe.fw)()),f((t=>({...t,[e]:n.target.value})))};(0,o.useEffect)((()=>{t((0,qe.uh)())}),[t]);return(0,j.jsxs)("div",{children:[(0,j.jsxs)(Be,{children:[(0,j.jsxs)(He,{children:[(0,j.jsx)(R.__,{children:"Username"}),(0,j.jsx)(R.II,{type:"text",value:u.username,onChange:b("username"),placeholder:"Enter username"})]}),(0,j.jsxs)(He,{children:[(0,j.jsx)(R.__,{children:"Password"}),(0,j.jsx)(R.II,{type:"password",value:u.password,onChange:b("password"),placeholder:"Enter password"})]}),(0,j.jsxs)(He,{children:[(0,j.jsx)(R.__,{children:"Confirm"}),(0,j.jsx)(R.II,{type:"password",value:u.confirmPassword,onChange:b("confirmPassword"),placeholder:"Confirm password"})]}),(0,j.jsx)(R.zx,{onClick:async()=>{if(p(!1),u.password===u.confirmPassword)try{await t((0,qe.rJ)({username:u.username,password:u.password})).unwrap(),h({username:"",password:"",confirmPassword:""}),r("User created successfully")}catch(e){console.error("Failed to create user:",e),l("Failed to create user: ".concat(e.message||"Unknown error"))}else p(!0)},disabled:a||!u.username||!u.password||!u.confirmPassword,children:a?"Adding...":"Add User"})]}),(m||d)&&(0,j.jsx)(R.cw,{children:(0,j.jsx)("div",{style:{color:"#dc3545"},children:m?"Passwords do not match":d})}),(0,j.jsxs)(L,{children:[[{key:"username",label:"Username"},{key:"active",label:"Active"},{key:"roles",label:"Role"},{key:"last_login_at",label:"Last Login"},{key:"actions",label:"Actions"}].map((e=>(0,j.jsx)(q,{children:e.label},e.key))),(0,j.jsx)(O,{children:i.map((e=>(0,j.jsxs)(o.Fragment,{children:[(0,j.jsxs)(B,{children:[(0,j.jsx)(H,{children:e.username}),(0,j.jsx)(H,{children:e.active?"Yes":"No"}),(0,j.jsx)(H,{children:e.roles}),(0,j.jsx)(H,{children:e.last_login_at?new Date(1e3*e.last_login_at).toLocaleString():"Never logged in"}),(0,j.jsx)(H,{children:(0,j.jsxs)(Ge,{children:[e.active&&(0,j.jsx)(R.zx,{onClick:()=>(e=>{x===e?(g(null),f({currentPassword:"",newPassword:"",confirmPassword:""})):g(e)})(e.id),active:x===e.id,children:"Change Password"}),e.id!==n&&(0,j.jsxs)(j.Fragment,{children:[e.active?(0,j.jsx)(R.zx,{danger:!0,onClick:()=>{return n=e,t((0,qe.ai)(n.id)).catch((e=>{l("Failed to deactivate user: ".concat(e.message||"Unknown error"))})),void r("User deactivated successfully");var n},children:"Deactivate"}):(0,j.jsx)(R.zx,{onClick:()=>{return n=e,t((0,qe.uz)(n.id)).catch((e=>{l("Failed to activate user: ".concat(e.message||"Unknown error"))})),void r("User activated successfully");var n},children:"Activate"}),(0,j.jsx)(R.zx,{danger:!0,last:!0,onClick:()=>{return n=e,t((0,qe.J$)(n.id)).catch((e=>{l("Failed to delete user: ".concat(e.message||"Unknown error"))})),void r("User deleted successfully");var n},children:"Delete"})]})]})})]}),x===e.id&&(0,j.jsx)(B,{children:(0,j.jsx)(H,{colSpan:5,children:(0,j.jsxs)(Ke,{children:[e.id===n&&(0,j.jsxs)(We,{children:[(0,j.jsx)(R.__,{children:"Current Password"}),(0,j.jsx)(R.II,{type:"password",value:v.currentPassword,onChange:y("currentPassword"),placeholder:"Enter current password"})]}),(0,j.jsxs)(We,{children:[(0,j.jsx)(R.__,{children:"New Password"}),(0,j.jsx)(R.II,{type:"password",value:v.newPassword,onChange:y("newPassword"),placeholder:"Enter new password"})]}),(0,j.jsxs)(We,{children:[(0,j.jsx)(R.__,{children:"Confirm Password"}),(0,j.jsx)(R.II,{type:"password",value:v.confirmPassword,onChange:y("confirmPassword"),placeholder:"Confirm new password"})]}),(0,j.jsx)(R.zx,{onClick:()=>(async e=>{if(v.newPassword===v.confirmPassword)try{await t((0,qe.jE)({userId:e,currentPassword:v.currentPassword,newPassword:v.newPassword})).unwrap(),f({currentPassword:"",newPassword:"",confirmPassword:""}),g(null),r("Password updated successfully")}catch(n){console.error("Failed to update password:",n),l("Failed to update password: ".concat(n.message||"Unknown error"))}})(e.id),disabled:e.id===n&&!v.currentPassword||!v.newPassword||!v.confirmPassword,children:"Update"})]})})})]},e.id)))})]})]})};var Je,Ve;const $e=i.ZP.div(Je||(Je=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n  background: ",";\n  border-radius: ",";\n  padding: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.large})),Ye=i.ZP.div(Ve||(Ve=(0,r.Z)(["\n  color: ",";\n  font-size: ",";\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.danger}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.small})),Xe=()=>{const e=(0,s.I0)(),{userInfo:n}=(0,c.a)(),{changingPassword:t,passwordError:r}=(0,s.v9)((e=>e.users)),{showSuccess:l,showError:i}=W(),[a,d]=(0,o.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[u,h]=(0,o.useState)(null),m=n=>t=>{r&&e((0,qe.fw)()),u&&h(null),d((e=>({...e,[n]:t.target.value})))};return(0,j.jsx)($e,{children:(0,j.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),h(null),a.newPassword===a.confirmPassword)if(a.newPassword.length<8)h("Password must be at least 8 characters long");else try{await e((0,qe.jE)({userId:n.userId,currentPassword:a.currentPassword,newPassword:a.newPassword})).unwrap(),d({currentPassword:"",newPassword:"",confirmPassword:""}),l("Password updated successfully")}catch(r){console.error("Failed to change password:",r),i("Failed to change password: ".concat(r.message||"Unknown error"))}else h("New passwords do not match")},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Current Password"}),(0,j.jsx)(R.II,{type:"password",value:a.currentPassword,onChange:m("currentPassword"),placeholder:"Enter current password",disabled:t})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"New Password"}),(0,j.jsx)(R.II,{type:"password",value:a.newPassword,onChange:m("newPassword"),placeholder:"Enter new password",disabled:t})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Confirm New Password"}),(0,j.jsx)(R.II,{type:"password",value:a.confirmPassword,onChange:m("confirmPassword"),placeholder:"Confirm new password",disabled:t})]}),(0,j.jsx)(R.zx,{type:"submit",disabled:t||!a.currentPassword||!a.newPassword||!a.confirmPassword,children:t?"Updating Password...":"Update Password"}),(u||r)&&(0,j.jsx)(Ye,{children:u||r})]})})};var en=t(9698);const nn=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,u.a)({queryKey:["update-status"],queryFn:async()=>{const e=Date.now();try{const n=await(0,h._T)(),t=Date.now()-e;return t>5e3&&console.warn("Slow update status response: ".concat(t,"ms")),n}catch(n){const t=Date.now()-e;throw console.error("Update status query failed after ".concat(t,"ms:"),n),n}},enabled:e,refetchInterval:!!e&&2e3,refetchIntervalInBackground:!0,retry:(e,n)=>401!==(null===n||void 0===n?void 0:n.status)&&403!==(null===n||void 0===n?void 0:n.status)&&e<30,retryDelay:e=>{const n=1e3*Math.pow(1.5,e),t=500*Math.random();return Math.min(n+t,5e3)},staleTime:0,gcTime:0,onError:e=>{console.error("Update status query error:",e)},onSuccess:e=>{console.debug("Update status updated:",e)},...n})};var tn,rn,on,sn;const ln=i.ZP.div(tn||(tn=(0,r.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  color: white;\n"]))),an=i.ZP.div(rn||(rn=(0,r.Z)(["\n  width: 50px;\n  height: 50px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-radius: 50%;\n  border-top-color: white;\n  animation: spin 1s ease-in-out infinite;\n  margin-bottom: ",";\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.large})),cn=i.ZP.div(on||(on=(0,r.Z)(["\n  font-size: ",";\n  margin-bottom: ",";\n  text-align: center;\n"])),(e=>{let{theme:n}=e;return n.typography.sizes.large}),(e=>{let{theme:n}=e;return n.spacing.large})),dn=i.ZP.div(sn||(sn=(0,r.Z)(["\n  max-width: 600px;\n  margin: ",";\n  padding: ",";\n  background: ",";\n  border-radius: ",";\n  color: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.colors.text.primary})),un=e=>{let{show:n,onUpdateComplete:t=_().noop,message:r="Updating System...",subMessage:s="This may take a few minutes. Please do not close your browser.",completeMessage:l="Update Complete! Please wait while we reload the page."}=e;const[i,a]=(0,o.useState)("updating"),[c,d]=(0,o.useState)(null),{data:u,error:h,isLoading:m}=nn(n);return(0,o.useEffect)((()=>{if(n)if(h)a("failed");else if(u){a("complete"),d(u.releaseNotes);const e=setTimeout((()=>{t(),window.location.reload()}),3e3);return()=>clearTimeout(e)}}),[u,h,n,t]),n?(0,j.jsxs)(ln,{children:["updating"===i&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(an,{}),(0,j.jsx)(cn,{children:r}),(0,j.jsx)(cn,{style:{fontSize:"14px",opacity:.7},children:s})]}),"complete"===i&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(cn,{children:l}),c&&(0,j.jsxs)(dn,{children:[(0,j.jsx)("h3",{children:"Release Notes"}),(0,j.jsx)("div",{children:c})]})]}),"failed"===i&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(cn,{children:"Update Status Unknown"}),(0,j.jsx)(cn,{style:{fontSize:"14px",opacity:.7},children:"Please refresh the page to check system status"})]})]}):null},hn=()=>{const e=(0,s.I0)(),{loading:n,error:t,success:r}=(0,s.v9)((e=>e.upload)),[l,i]=(0,o.useState)(null),[a,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[h,m]=(0,o.useState)(Date.now()),[p,x]=(0,o.useState)(!1);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Update File"}),(0,j.jsx)(R.II,{type:"file",onChange:n=>{const t=n.target.files[0];i(t),u(""),e((0,en.D_)())}},h)]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Checksum (optional)"}),(0,j.jsx)(R.II,{type:"text",placeholder:"Enter checksum",value:a,onChange:n=>{c(n.target.value),u(""),e((0,en.D_)())}})]}),(d||t)&&(0,j.jsx)(R.cw,{children:(0,j.jsx)("div",{style:{color:"#dc3545"},children:d||t})}),r&&(0,j.jsx)(R.cw,{children:(0,j.jsx)("div",{style:{color:"#28a745"},children:"Upload successful!"})}),(0,j.jsx)(R.zx,{onClick:async()=>{if(l)if(l.name.endsWith(".tar.gz"))try{await e((0,en.YT)({file:l,checksum:a})).unwrap(),x(!0),i(null),c(""),m(Date.now())}catch(n){console.error("Upload failed:",n)}else u("Please select a .tar.gz file.");else u("Please select a file.")},disabled:!l||n,children:n?"Uploading...":"Update System"})]}),(0,j.jsx)(un,{show:p,onUpdateComplete:()=>x(!1)})]})};var mn,pn,xn;const gn=i.ZP.div(mn||(mn=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding-top: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large})),vn=i.ZP.div(pn||(pn=(0,r.Z)(["\n  color: ",";\n  font-size: ",";\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.error}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.small})),fn=i.ZP.div(xn||(xn=(0,r.Z)(["\n  color: ",";\n  font-size: ",";\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.success}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.small})),jn=()=>{const[e,n]=(0,o.useState)({url:"",key:"",token:""}),[t,r]=(0,o.useState)(!1),[s,l]=(0,o.useState)(null),[i,a]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),u=e=>e.startsWith("http")||e.startsWith("https")?e.endsWith("/")?e.slice(0,-1):e:"https://".concat(e),m=e=>t=>{l(null),a(!1),n((n=>({...n,[e]:t.target.value})))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(un,{show:c,message:"Updating network configuration...",subMessage:"This may take a few minutes. Please do not close your browser.",completeMessage:"Update Complete! Please wait while we reload the page.",onUpdateComplete:()=>{d(!1),a(!0),n({url:"",key:"",token:""})}}),(0,j.jsxs)(gn,{children:[(0,j.jsx)("h3",{children:"Network Configuration"}),(0,j.jsx)(R.Hr,{}),(0,j.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),r(!0),l(null),a(!1);try{d(!0),(0,h.Ds)(e.key,u(e.url),e.token).catch((()=>{}))}catch(t){l(t.message||"Failed to update VPN configuration"),r(!1)}},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"URL"}),(0,j.jsx)(R.II,{type:"text",value:e.url,onChange:m("url"),placeholder:"https://app.example.com",disabled:t})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Token"}),(0,j.jsx)(R.II,{type:"text",value:e.token,onChange:m("token"),placeholder:"Enter your network token",disabled:t})]}),(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"Setup Key"}),(0,j.jsx)(R.II,{type:"text",value:e.key,onChange:m("key"),placeholder:"Enter your network setup key",disabled:t})]}),(0,j.jsx)(R.zx,{type:"submit",disabled:t||!e.url||!e.key||!e.token,children:t?"Updating...":"Change Network - Device will restart"}),s&&(0,j.jsx)(vn,{children:s}),i&&(0,j.jsx)(fn,{children:"VPN configuration updated successfully!"})]})]})]})};var bn,yn,wn,Pn,kn,Zn,Sn,Cn=t(1285);const _n=i.ZP.div(bn||(bn=(0,r.Z)(["\n  h3 {\n    color: ",";\n    margin-bottom: ",";\n    font-size: 1.1em;\n    font-weight: 500;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.medium})),In=i.ZP.div(yn||(yn=(0,r.Z)(["\n  background: ",";\n  border: 1px solid ",";\n  color: white;\n  padding: ",";\n  border-radius: ",";\n  margin-bottom: ",";\n  text-align: center;\n  font-weight: 500;\n  font-size: 1.2em;\n"])),(e=>{let{theme:n,status:t}=e;switch(t){case"licensed":return n.colors.text.success;case"expired":return n.colors.background.warning;case"unlicensed":return n.colors.text.error;default:return n.colors.background.base}}),(e=>{let{theme:n,status:t}=e;switch(t){case"licensed":return n.colors.text.success;case"expired":return n.colors.background.warning;case"unlicensed":return n.colors.text.error;default:return n.colors.border}}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.medium})),Rn=i.ZP.div(wn||(wn=(0,r.Z)(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  padding: ",";\n  margin-bottom: ",";\n  \n  strong {\n    color: ",";\n  }\n  \n  br + strong {\n    margin-top: ",";\n    display: inline-block;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.small})),zn=i.ZP.div(Pn||(Pn=(0,r.Z)(["\n  color: ",";\n  margin-bottom: ",";\n  text-align: center;\n  font-size: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.error}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.typography.sizes.small})),En=i.ZP.div(kn||(kn=(0,r.Z)(["\n  color: ",";\n  margin-bottom: ",";\n  text-align: center;\n  font-size: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.success}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.typography.sizes.small})),Tn=i.ZP.div(Zn||(Zn=(0,r.Z)(["\n  text-align: center;\n  color: ",";\n  font-size: ",";\n  padding: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.medium})),Nn=(0,i.ZP)(R.zx)(Sn||(Sn=(0,r.Z)(["\n  margin-top: ",";\n  background-color: ",";\n  border-color: ",";\n  font-size: ",";\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  \n  &:hover {\n    background-color: ",";\n    border-color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.colors.background.accent}),(e=>{let{theme:n}=e;return n.colors.background.accent}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.colors.background.accentHover}),(e=>{let{theme:n}=e;return n.colors.background.accentHover})),An=()=>{var e,n,t;const{authToken:r}=(0,c.a)(),{isPollingPaused:s}=(0,f.h)(),[l,i]=(0,o.useState)(""),[a,d]=(0,o.useState)(!1),{data:u,isLoading:h,error:m}=(0,Cn.Br)({pausePolling:s}),{data:p,isLoading:x,error:g}=(0,Cn.Ao)("licensed"===(null===u||void 0===u?void 0:u.status),{pausePolling:s}),{data:v,isLoading:b,error:y}=(0,Cn.DV)({pausePolling:s}),w=(0,Cn.ET)(),P=(0,Cn.vZ)(),k=(null===u||void 0===u?void 0:u.status)||"unknown",Z=h||x||b,S=m||g||y,C=(()=>{switch(k){case"licensed":return{text:"\u2705 Licensed"};case"expired":return{text:"\u26a0\ufe0f License Expired"};case"unlicensed":return{text:"\u274c Unlicensed"};default:return{text:"\u2753 Unknown Status"}}})();return Z?(0,j.jsxs)(_n,{children:[(0,j.jsx)("h3",{children:"License Management"}),(0,j.jsx)(R.Hr,{}),(0,j.jsx)(Tn,{children:"Loading license information..."})]}):S?(0,j.jsxs)(_n,{children:[(0,j.jsx)("h3",{children:"License Management"}),(0,j.jsx)(R.Hr,{}),(0,j.jsx)(zn,{children:"Failed to load license information. Please try refreshing the page."})]}):(0,j.jsxs)(_n,{children:[(0,j.jsx)("h3",{children:"License Management"}),(0,j.jsx)(R.Hr,{}),(0,j.jsx)(In,{status:k,children:C.text}),v&&(0,j.jsxs)(Rn,{children:[(0,j.jsx)("strong",{children:"Device Information:"}),(0,j.jsx)("br",{}),(0,j.jsx)("strong",{children:"Device ID:"})," ",(0,j.jsx)("span",{style:{color:"#aaa"},children:(()=>{const e=v.device_id||v.current_device_id||"Unknown";return"Unknown"===e||e.length<=20?e:"".concat(e.substring(0,10),"...").concat(e.substring(e.length-10))})()}),(0,j.jsx)(Nn,{onClick:()=>{if(!v)return;const e=JSON.stringify(v,null,2),n=new Blob([e],{type:"application/json"}),t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download="device_info_".concat(v.device_id||v.current_device_id||"unknown",".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t),d(!0),setTimeout((()=>d(!1)),3e3)},disabled:!v,children:"\ud83d\udce5 Download Device Info"})]}),p&&(0,j.jsxs)(Rn,{children:[(0,j.jsx)("strong",{children:"License Details:"}),(0,j.jsx)("br",{}),(0,j.jsx)("strong",{children:"Customer:"})," ",(0,j.jsx)("span",{style:{color:"#aaa"},children:(null===(e=p.license_info)||void 0===e?void 0:e.customer_name)||"Unknown"}),(0,j.jsx)("br",{}),(0,j.jsx)("strong",{children:"Issued:"})," ",(0,j.jsx)("span",{style:{color:"#aaa"},children:null!==(n=p.license_info)&&void 0!==n&&n.issued_date?new Date(p.license_info.issued_date).toLocaleDateString():"Unknown"}),(0,j.jsx)("br",{}),(0,j.jsx)("strong",{children:"Expires:"})," ",(0,j.jsx)("span",{style:{color:"#aaa"},children:null!==(t=p.license_info)&&void 0!==t&&t.expiry_date?new Date(p.license_info.expiry_date).toLocaleDateString():"Unknown"}),null!==p.expires_in_days&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("br",{}),(0,j.jsx)("strong",{children:"Days Remaining:"})," ",(0,j.jsx)("span",{style:{color:"#aaa"},children:p.expires_in_days})]})]}),"unlicensed"===k&&(0,j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.trim())try{await w.mutateAsync(l.trim()),i(""),d(!0),setTimeout((()=>d(!1)),3e3)}catch(n){console.error("License activation failed:",n)}},children:[(0,j.jsxs)(R.cw,{children:[(0,j.jsx)(R.__,{children:"License Key"}),(0,j.jsx)(R.II,{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Enter your license key",disabled:w.isPending})]}),(0,j.jsx)(R.zx,{type:"submit",disabled:w.isPending||!l.trim(),children:w.isPending?"Activating...":"Activate License"})]}),w.error&&(0,j.jsx)(zn,{children:w.error.message||"Failed to activate license"}),P.error&&(0,j.jsx)(zn,{children:P.error.message||"Failed to deactivate license"}),a&&(0,j.jsx)(En,{children:"Operation completed successfully!"})]})};var Dn=t(553);const Mn=()=>Dn.Z.makeAuthRequest("ssl/status");var Un,Fn,Ln,On,qn;const Bn=i.ZP.div(Un||(Un=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n  margin-bottom: 16px;\n"]))),Hn=i.ZP.div(Fn||(Fn=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"]))),Gn=i.ZP.div(Ln||(Ln=(0,r.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background-color: ",";\n  box-shadow: 0 0 8px ",";\n"])),(e=>e.active?"#28a745":"#dc3545"),(e=>e.active?"rgba(40, 167, 69, 0.4)":"rgba(220, 53, 69, 0.4)")),Kn=i.ZP.span(On||(On=(0,r.Z)(["\n  font-weight: 500;\n  color: #495057;\n"]))),Wn=(0,i.ZP)(R.zx)(qn||(qn=(0,r.Z)(["\n  background-color: ",";\n  border-color: ",";\n  font-size: ",";\n  \n  &:hover {\n    background-color: ",";\n    border-color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.accent}),(e=>{let{theme:n}=e;return n.colors.background.accent}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.colors.background.accentHover}),(e=>{let{theme:n}=e;return n.colors.background.accentHover})),Qn=()=>{const{authToken:e}=(0,c.a)(),[n,t]=(0,o.useState)(!1),{data:r,isLoading:s,error:l}=(0,u.a)({queryKey:["ssl-status"],queryFn:Mn,refetchInterval:3e4});if(s)return(0,j.jsx)(Bn,{children:(0,j.jsxs)(Hn,{children:[(0,j.jsx)(Gn,{active:!1}),(0,j.jsx)(Kn,{children:"Loading SSL status..."})]})});if(l)return(0,j.jsx)(Bn,{children:(0,j.jsxs)(Hn,{children:[(0,j.jsx)(Gn,{active:!1}),(0,j.jsx)(Kn,{children:"SSL status unavailable"})]})});const i=null===r||void 0===r?void 0:r.ssl_enabled,a=null===r||void 0===r?void 0:r.certificate_exists;return(0,j.jsxs)(Bn,{children:[(0,j.jsxs)(Hn,{children:[(0,j.jsx)(Gn,{active:i&&a}),(0,j.jsx)(Kn,{children:i&&a?"SSL Enabled":"SSL Disabled"})]}),i&&a&&(0,j.jsx)(Wn,{onClick:async()=>{if(null!==r&&void 0!==r&&r.ssl_enabled){t(!0);try{await(async()=>{const e=await Dn.Z.makeAuthRequest("ssl/certificate",{method:"GET",responseType:"blob"},3e4),n=window.URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="warhammer-ssl-certificate.zip",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(n),document.body.removeChild(t)})()}catch(l){console.error("Failed to download certificate:",l),alert("Failed to download certificate. Please try again.")}finally{t(!1)}}},disabled:n,children:n?"Downloading...":"Download Certificate"})]})},Jn=e=>{let{isOpen:n,onClose:t}=e;const{userInfo:r}=(0,c.a)(),{roles:o}=r||[],s=null===o||void 0===o?void 0:o.includes("admin"),{canAccessSystemConfig:l,canAccessUserManagement:i,canAccessVpnKey:a,canAccessFileUpload:u,canAccessPasswordChange:h,shouldShowRestrictedContent:m}=(0,d.j)(),p=(0,j.jsxs)("div",{children:[u&&(0,j.jsxs)(R.KR,{children:[(0,j.jsx)(R.Hr,{}),(0,j.jsx)(hn,{})]}),s&&a&&(0,j.jsx)(R.KR,{children:(0,j.jsx)(jn,{})}),(0,j.jsx)(R.KR,{children:(0,j.jsx)(An,{})}),(0,j.jsx)(R.KR,{children:(0,j.jsx)(Qn,{})})]}),x=(0,j.jsxs)("div",{children:[h&&(0,j.jsxs)(R.KR,{children:[(0,j.jsx)(R.Hr,{}),(0,j.jsx)(Xe,{})]}),!m(o)&&(0,j.jsx)(R.KR,{children:(0,j.jsx)(An,{})})]}),g=(0,j.jsx)("div",{children:i&&(0,j.jsx)(R.KR,{children:(0,j.jsx)(Qe,{})})}),v=s&&m(o),f=v?p:x,b=v?"System Update":"Account Settings";return(0,j.jsx)(T,{isOpen:n,onClose:t,title:"Configuration",leftPaneTitle:b,rightPaneTitle:s&&i?"User Management":"",leftPane:f,rightPane:s&&i?g:null,singlePane:!s||!m(o)})};var Vn,$n,Yn,Xn;const et=i.ZP.div(Vn||(Vn=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.small})),nt=(0,i.ZP)(R.zx).attrs((()=>({as:"a",target:"_blank",rel:"noopener noreferrer"})))($n||($n=(0,r.Z)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  text-decoration: none;\n  width: fit-content;\n"]))),tt=i.ZP.div(Yn||(Yn=(0,r.Z)(["\n  margin-top: ",";\n  color: ",";\n  font-size: 0.9em;\n  line-height: 1.6;\n\n  ol {\n    margin: "," 0;\n    padding-left: 20px;\n  }\n\n  li {\n    margin-bottom: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.small})),rt=i.ZP.div(Xn||(Xn=(0,r.Z)(["\n  margin-top: ",";\n  padding: "," ",";\n  background: ",";\n  border-left: 3px solid ",";\n  border-radius: ",";\n  color: ",";\n  font-size: 0.85em;\n"])),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.accent}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.colors.text.primary})),ot=e=>{let{isOpen:n,onClose:t}=e;const r={NODE_ENV:"production",PUBLIC_URL:"/management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WARHAMMER_URL:"/api",REACT_APP_WARHAMMER_IP_SPACE:"44.44.44",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoiam1jY3VsbG91Z2g0IiwiYSI6ImNtMGJvaDUxNjBhYnkybHByd2ZycGMxbWEifQ.L_lcOTqwvBjD6TgLJqF1ZA"}.REACT_APP_MATRIX_HOMESERVER||"your-matrix-server.example.com",o=Boolean({NODE_ENV:"production",PUBLIC_URL:"/management",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WARHAMMER_URL:"/api",REACT_APP_WARHAMMER_IP_SPACE:"44.44.44",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoiam1jY3VsbG91Z2g0IiwiYSI6ImNtMGJvaDUxNjBhYnkybHByd2ZycGMxbWEifQ.L_lcOTqwvBjD6TgLJqF1ZA"}.REACT_APP_MATRIX_HOMESERVER),s=(0,j.jsxs)("div",{children:[(0,j.jsx)(et,{children:[{label:"Element Desktop (Windows)",url:"https://element.io/download#desktop"},{label:"Element Desktop (macOS)",url:"https://element.io/download#desktop"},{label:"Element Desktop (Linux)",url:"https://element.io/download#desktop"}].map((e=>{let{label:n,url:t}=e;return(0,j.jsx)(nt,{href:t,children:n},n)}))}),(0,j.jsxs)(tt,{children:[(0,j.jsx)("p",{children:"Element Desktop is a fully featured Matrix client that supports end-to-end encryption and multi-room chat."}),(0,j.jsxs)("ol",{children:[(0,j.jsx)("li",{children:"Download the installer for your operating system."}),(0,j.jsx)("li",{children:"Run the installer and launch Element."}),(0,j.jsxs)("li",{children:["When prompted, select ",(0,j.jsx)("strong",{children:'"Sign in with existing account"'}),"."]}),(0,j.jsxs)("li",{children:["Set the homeserver to ",(0,j.jsx)("strong",{children:r}),"."]}),(0,j.jsx)("li",{children:"Sign in with the credentials provided by your Warhammer administrator."})]})]}),(0,j.jsx)(rt,{children:"Looking for mobile access? Install Element from the iOS App Store or Google Play and reuse the same homeserver and credentials."}),!o&&(0,j.jsxs)(rt,{children:["Tip: set ",(0,j.jsx)("code",{children:"REACT_APP_MATRIX_HOMESERVER"})," in the frontend environment to replace the placeholder homeserver shown above."]})]});return(0,j.jsx)(T,{isOpen:n,onClose:t,title:"Chat",leftPaneTitle:"Desktop Clients",leftPane:s,singlePane:!0})};var st,lt,it,at,ct,dt;const ut=i.ZP.div(st||(st=(0,r.Z)(["\n  background-color: ",";\n  color: ",";\n  padding: "," ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1001;\n\n  @media (max-width: ",") {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.textMuted}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.shadows.header}),(e=>{let{theme:n}=e;return n.breakpoints.mobile})),ht=i.ZP.div(lt||(lt=(0,r.Z)(["\n  img {\n    height: 15px;\n  }\n"]))),mt=i.ZP.div(it||(it=(0,r.Z)(["\n  color: ",";\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 1.2em;\n  display: flex;\n  font-weight: bold;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  pointer-events: none;\n\n  @media (max-width: 768px) {\n    position: static;\n    transform: none;\n    margin-top: 10px;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary})),pt=i.ZP.div(at||(at=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 20px;\n\n  @media (max-width: 768px) {\n    width: 100%;\n    justify-content: flex-end;\n  }\n"]))),xt=i.ZP.div(ct||(ct=(0,r.Z)(["\n  display: flex;\n  gap: 10px;\n"]))),gt=i.ZP.button(dt||(dt=(0,r.Z)(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: .75em;\n  cursor: pointer;\n  letter-spacing: 1px;\n  text-transform: uppercase;\n  position: relative;\n  transition: color 0.3s ease;\n  padding: 8px 12px;\n  font-family: 'Poppins', sans-serif;\n\n  &:hover {\n    color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.colors.text.hyperlink})),vt="none",ft="routes",jt="network",bt="performance",yt="config",wt="chat",Pt=()=>{const{logout:e,vpnUnavailable:n}=(0,c.a)(),{canAccessRoutes:t,canAccessNetwork:r,canAccessPerformance:l}=(0,d.j)(),i=(0,s.v9)((e=>{var n,t;return null===e||void 0===e||null===(n=e.warhammer)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.info})),[a,u]=(0,o.useState)(vt),h=e=>{u(e)},m=()=>{u(vt)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(ut,{children:[(0,j.jsx)(ht,{children:(0,j.jsx)("img",{src:"".concat("/management","/WH_logo.png"),alt:"Logo"})}),(0,j.jsx)(mt,{children:(null===i||void 0===i?void 0:i.name)||"WARHAMMER"}),(0,j.jsxs)(pt,{children:[(0,j.jsxs)(xt,{children:[t&&!n&&(0,j.jsx)(gt,{onClick:()=>h(ft),children:"Routes"}),r&&!n&&(0,j.jsx)(gt,{onClick:()=>h(jt),children:"Network"}),l&&!n&&(0,j.jsx)(gt,{onClick:()=>h(bt),children:"Performance"}),(0,j.jsx)(gt,{onClick:()=>h(wt),children:"Chat"}),(0,j.jsx)(gt,{onClick:()=>h(yt),children:"Config"}),(0,j.jsx)(gt,{onClick:()=>{e()},children:"Logout"})]}),(0,j.jsx)(k,{})]})]}),(0,j.jsx)(Q,{isOpen:a===ft,onClose:m}),(0,j.jsx)(_e,{isOpen:a===jt,onClose:m}),(0,j.jsx)(De,{isOpen:a===bt,onClose:m}),(0,j.jsx)(ot,{isOpen:a===wt,onClose:m}),(0,j.jsx)(Jn,{isOpen:a===yt,onClose:m})]})};var kt,Zt,St,Ct,_t;const It=i.ZP.div(kt||(kt=(0,r.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: "," ",";\n  background-color: ",";\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 1000;\n"])),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.background.surface})),Rt=i.ZP.div(Zt||(Zt=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  gap: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium})),zt=(i.ZP.button(St||(St=(0,r.Z)(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: ",";\n  cursor: pointer;\n  padding: "," ",";\n  font-weight: ",";\n  \n  &:hover {\n    opacity: 0.9;\n  }\n\n  &:active {\n    transform: translateY(1px);\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.error}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.typography.weights.medium})),i.ZP.span(Ct||(Ct=(0,r.Z)(["\n  color: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}))),Et=i.ZP.span(_t||(_t=(0,r.Z)(["\n  color: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}));var Tt;const Nt=i.ZP.div(Tt||(Tt=(0,r.Z)(["\n  color: ",";\n  margin: "," 0;\n  font-weight: ",";\n  font-size: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.error}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.typography.weights.medium}),(e=>{let{theme:n}=e;return n.typography.sizes.large})),At=e=>{let{isOpen:n,onClose:t,onConfirm:r}=e;const[s,l]=(0,o.useState)(""),[i,a]=(0,o.useState)(!1);return n?(0,j.jsx)(R.ZA,{onClick:t,children:(0,j.jsxs)(R.hz,{onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)(R.xB,{children:[(0,j.jsx)(R.r6,{children:"Kill Network"}),(0,j.jsx)(R.PZ,{onClick:t,children:"\xd7"})]}),(0,j.jsx)(Nt,{children:"WARNING: This will permanently delete your entire network configuration. This action cannot be undone."}),(0,j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),"KILL"===s){a(!0);try{await r(),t()}catch(n){console.error("Failed to kill network:",n)}finally{a(!1)}}},children:[(0,j.jsx)(R.cw,{children:(0,j.jsx)(R.II,{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Type KILL in all caps to confirm",disabled:i})}),"KILL"===s&&(0,j.jsx)(R.zx,{type:"submit",$danger:!0,children:i?"Killing Network...":"Kill Network"})]})]})}):null},Dt=()=>{const[e,n]=(0,o.useState)(!1),t=(0,s.v9)((e=>{var n,t;return null===e||void 0===e||null===(n=e.warhammer)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.info}));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(It,{children:[(0,j.jsx)(Rt,{}),(0,j.jsxs)(Rt,{children:[(0,j.jsx)(zt,{children:"Powered by CTG"}),(0,j.jsx)(Et,{children:"v".concat((null===t||void 0===t?void 0:t.version)||"-")})]})]}),(0,j.jsx)(At,{isOpen:e,onClose:()=>n(!1),onConfirm:async()=>{try{await(0,h.Ib)()}catch(e){console.error("Failed to kill network:",e)}}})]})},Mt=o.memo(Dt);var Ut,Ft,Lt,Ot,qt,Bt=t(5483),Ht=t.n(Bt);t(5461),t(3406),t(3161);const Gt=i.ZP.div(Ut||(Ut=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n\n  .mapboxgl-ctrl-group {\n    background: ",";\n    border: none;\n    box-shadow: ",";\n\n    button {\n      background: none;\n      border: none;\n      color: ",";\n      width: 30px;\n      height: 30px;\n      padding: 5px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      &:hover {\n        background: rgba(255, 255, 255, 0.1);\n      }\n\n      &.active {\n        background: rgba(255, 255, 255, 0.1);\n        color: ",";\n      }\n\n      svg {\n        width: 16px;\n        height: 16px;\n      }\n    }\n  }\n\n  .custom-marker {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    cursor: pointer;\n\n    .marker-dot {\n      width: 12px;\n      height: 12px;\n      background: ",";\n      border-radius: 50%;\n      border: 2px solid white;\n      box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);\n      transition: all 0.2s ease;\n\n      &:hover {\n        transform: scale(1.2);\n      }\n    }\n\n    &.current .marker-dot {\n      width: 16px;\n      height: 16px;\n      background: ",";\n    }\n\n    &.connected .marker-dot {\n      background: ",";\n    }\n\n    .marker-label {\n      background: ",";\n      color: ",";\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-size: 12px;\n      margin-top: 10px;\n      white-space: nowrap;\n      opacity: 0.9;\n      transform: translateY(-8px);\n    }\n  }\n\n  .custom-popup {\n    .popup-content {\n      h3 {\n        margin: 0 0 8px;\n        font-size: 14px;\n        font-weight: ",";\n      }\n\n      p {\n        margin: 4px 0;\n        font-size: 12px;\n        color: ",";\n      }\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.shadows.card}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.colors.accent}),(e=>{let{theme:n}=e;return n.colors.text.error}),(e=>{let{theme:n}=e;return n.colors.text.hyperlink}),(e=>{let{theme:n}=e;return n.colors.text.success}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.typography.weights.medium}),(e=>{let{theme:n}=e;return n.colors.text.muted})),Kt=(i.ZP.div(Ft||(Ft=(0,r.Z)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 1;\n  background: ",";\n  padding: ",";\n  border-radius: ",";\n  box-shadow: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.shadows.card})),i.ZP.div(Lt||(Lt=(0,r.Z)(["\n  position: absolute;\n  z-index: 1;\n"])))),Wt=i.ZP.div(Ot||(Ot=(0,r.Z)(["\n  position: absolute;\n  bottom: 35px;\n  left: 7px;\n  z-index: 2;\n\n  select {\n    background: ",";\n    color: ",";\n    border: none;\n    border-radius: ",";\n    padding: "," ",";\n    font-size: 0.85em;\n    cursor: pointer;\n    box-shadow: ",";\n    \n    &:focus {\n      outline: none;\n      border-color: ",";\n    }\n\n    option {\n      background: ",";\n      color: ",";\n      padding: ",";\n    }\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.shadows.card}),(e=>{let{theme:n}=e;return n.colors.accent}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.small}));i.ZP.div(qt||(qt=(0,r.Z)(["\n  .mapboxgl-popup-content {\n    background: ",";\n    color: ",";\n    border-radius: ",";\n    padding: ",";\n    box-shadow: ",";\n  }\n\n  .mapboxgl-popup-tip {\n    border-top-color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.shadows.card}),(e=>{let{theme:n}=e;return n.colors.background.surface}));var Qt=t(3001);Ht().accessToken="pk.eyJ1Ijoiam1jY3VsbG91Z2g0IiwiYSI6ImNtMGJvaDUxNjBhYnkybHByd2ZycGMxbWEifQ.L_lcOTqwvBjD6TgLJqF1ZA";const Jt={current:null,fitToPeer:e=>{var n,t;Jt.current&&null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.latitude&&null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.longitude&&Jt.current.flyTo({center:[e.location.longitude,e.location.latitude],zoom:15,essential:!0})}},Vt={dark:"Dark",light:"Light",satellite:"Satellite",streets:"Streets",satellite_streets:"Satellite Streets"},$t={dark:"mapbox://styles/mapbox/dark-v11",light:"mapbox://styles/mapbox/light-v11",satellite:"mapbox://styles/mapbox/satellite-v9",streets:"mapbox://styles/mapbox/streets-v12",satellite_streets:"mapbox://styles/mapbox/satellite-streets-v12"},Yt=()=>{const e=(0,o.useRef)(null),n=(0,o.useRef)(null),t=(0,s.v9)((e=>e.vpn.peers)),r=(0,s.v9)((e=>e.warhammer.data.info)),[l,i]=(0,o.useState)([0,0]),[a,c]=(0,o.useState)(3),[d,u]=(0,o.useState)(!1),[h,m]=(0,o.useState)("dark"),p=(0,o.useRef)({}),[x,g]=(0,o.useState)(!1),[v,f]=(0,o.useState)(!1),[b,y]=(0,o.useState)(!0),w=(0,o.useRef)(!1),[P,k]=(0,o.useState)(!1),Z=()=>{if(!n.current||null===t||void 0===t||!t.length)return;const e=new(Ht().LngLatBounds);let r=!1;t.forEach((n=>{var t,o;null!==(t=n.location)&&void 0!==t&&t.latitude&&null!==(o=n.location)&&void 0!==o&&o.longitude&&(e.extend([n.location.longitude,n.location.latitude]),r=!0)})),r&&(x&&_(),n.current.fitBounds(e,{padding:50,maxZoom:15}))},S=()=>{n.current&&n.current.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,90],"sky-atmosphere-sun-intensity":15}})},C=()=>{n.current&&(Object.values(p.current).forEach((e=>e.remove())),p.current={},t.forEach((e=>{var t,o;if(null!==(t=e.location)&&void 0!==t&&t.latitude&&null!==(o=e.location)&&void 0!==o&&o.longitude){var s;const t=((e,n)=>{const t=document.createElement("div");t.className="custom-marker ".concat(n?"current":""," ").concat(e.connected&&!n?"connected":"");const r=document.createElement("div");r.className="marker-dot";const o=document.createElement("div");return o.className="marker-label",o.textContent=e.name||"Unknown",t.appendChild(o),t.appendChild(r),t})(e,(null===e||void 0===e?void 0:e.name)===(null===r||void 0===r?void 0:r.name)),o=new(Ht().Marker)({element:t,anchor:"bottom"}).setLngLat([e.location.longitude,e.location.latitude]).addTo(n.current),l=new(Ht().Popup)({closeButton:!1,closeOnClick:!1,offset:25,className:"custom-popup"}).setHTML('\n            <div class="popup-content">\n              <h3>'.concat(e.name||"Unknown","</h3>\n              <p>IP: ").concat(e.ip||"N/A","</p>\n              <p>Status: ").concat(e.connected?"Connected":"Disconnected","</p>\n              <p>Last Update: ").concat((null===(s=e.location)||void 0===s?void 0:s.last_update)||"N/A","</p>\n            </div>\n          "));t.addEventListener("mouseenter",(()=>{o.setPopup(l),l.addTo(n.current)})),t.addEventListener("mouseleave",(()=>{l.remove()})),p.current[e.id]=o}})))},_=()=>{if(!n.current)return;const e=n.current.getStyle().layers.find((e=>"building-3d"===e.id));x?e&&n.current.removeLayer("building-3d"):e||n.current.addLayer({id:"building-3d",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}}),g(!x)};return(0,o.useEffect)((()=>{const e=setTimeout((()=>{y(!1)}),750);return()=>clearTimeout(e)}),[]),(0,o.useEffect)((()=>{if(!b)return n.current||(n.current=new(Ht().Map)({container:e.current,style:$t.dark,center:[0,0],zoom:1,attributionControl:!1,pitch:45}),Jt.current=n.current,n.current.addControl(new(Ht().NavigationControl),"top-left"),n.current.on("load",(()=>{w.current=!0,S(),null!==t&&void 0!==t&&t.length&&(Z(),f(!0))}))),()=>{n.current&&(Jt.current=null,Object.values(p.current).forEach((e=>e.remove())),n.current.remove(),n.current=null)}}),[b]),(0,o.useEffect)((()=>{n.current&&C(),w.current&&!v&&(null===t||void 0===t?void 0:t.length)>0&&(Z(),f(!0))}),[t,r,b]),(0,j.jsxs)(Gt,{ref:e,children:[b&&(0,j.jsx)(Qt.Z,{message:"Loading Network..."}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"10px",right:"10px"},children:(0,j.jsx)("button",{onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),u(!1)):(e.current.requestFullscreen(),u(!0))},title:"Toggle Fullscreen",children:d?(0,j.jsx)(I.Gbj,{}):(0,j.jsx)(I.ABE,{})})}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"50px",right:"10px"},children:(0,j.jsx)("button",{onClick:()=>{Z()},title:"Reset Map View",children:(0,j.jsx)(I.Bw1,{})})}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"90px",right:"10px"},children:(0,j.jsx)("button",{onClick:_,className:x?"active":"",title:"Toggle 3D Buildings",children:(0,j.jsx)(I.yG,{})})}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"130px",right:"10px"},children:(0,j.jsx)("button",{onClick:()=>{n.current&&(P?(n.current.setTerrain(null),n.current.getSource("mapbox-dem")&&n.current.removeSource("mapbox-dem")):(n.current.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),n.current.setTerrain({source:"mapbox-dem",exaggeration:1.5})),k(!P))},className:P?"active":"",title:"Toggle Terrain",children:(0,j.jsx)(I.MIl,{})})}),(0,j.jsx)(Wt,{children:(0,j.jsx)("select",{value:h,onChange:e=>{const t=e.target.value;if(n.current&&$t[t]){const e=P;n.current.once("style.load",(()=>{S(),e&&(n.current.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),n.current.setTerrain({source:"mapbox-dem",exaggeration:1.5}))})),n.current.setStyle($t[t]),m(t)}},children:Object.entries(Vt).map((e=>{let[n,t]=e;return(0,j.jsx)("option",{value:n,children:t},n)}))})})]})};var Xt=t(9203);const er=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{pausePolling:n=!1,...t}=e;return(0,u.a)({queryKey:["peers"],queryFn:async()=>{const e=Date.now();try{const n=await(0,h.$W)(),t=Date.now()-e;if(t>1e4&&console.warn("Slow peers response: ".concat(t,"ms")),!Array.isArray(n))return console.error("Peers data is not an array:",typeof n,n),[];if(0===n.length)return console.log("No peers returned from API"),[];const r=(0,K.LG)(n);return r.sort(((e,n)=>e.connected===n.connected?e.name.localeCompare(n.name):e.connected?-1:1))}catch(n){const t=Date.now()-e;throw console.error("Peers query failed after ".concat(t,"ms:"),n),n}},refetchInterval:e=>{if(n)return!1;const t=e.state.data,r=e.state.error,o=e.state.failureCount;if(r&&o>1)return Math.min(6e4*o,3e5);if(!t||0===t.length)return 5e3;return t.filter((e=>e.connected)).length>0?15e3:3e4},refetchIntervalInBackground:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,retry:(e,n)=>{var t;return 401!==(null===n||void 0===n?void 0:n.status)&&403!==(null===n||void 0===n?void 0:n.status)&&(!(null!==n&&void 0!==n&&null!==(t=n.message)&&void 0!==t&&t.includes("Network Error")&&e>=2)&&e<3)},retryDelay:e=>{const n=1e3*Math.pow(2,e),t=1e3*Math.random();return Math.min(n+t,3e4)},staleTime:1e4,gcTime:6e5,onError:e=>{console.error("Peers query error:",e)},onSuccess:e=>{console.log("Successfully fetched ".concat(e.length," peers"))},onSettled:(e,n)=>{n?console.warn("Peers query settled with error:",n.message):console.debug("Peers query settled successfully")},...t})},nr=()=>{const e=(0,J.NL)(),[n,t]=(0,o.useState)(0),r=(0,o.useRef)(0),s=(0,o.useRef)(new Map),l=(0,o.useRef)(new Map);return(0,o.useEffect)((()=>e.getQueryCache().subscribe((e=>{const n=Date.now();n-r.current>1e3&&(r.current=n,t((e=>e+1)))}))),[e]),(0,o.useMemo)((()=>{const n=e.getQueryCache().getAll().filter((e=>"peers"===e.queryKey[0]));if(0===n.length)return{quality:1,status:"unknown",totalQueries:0,successfulQueries:0,failedQueries:0,averageResponseTime:0,lastError:null};n.forEach((e=>{const n=e.queryKey[0],t=s.current.get(n)||{total:0,successful:0,failed:0,responseTimes:[],lastStatus:null,lastDataUpdatedAt:0},r=e.state.status,o=e.state.dataUpdatedAt;if("fetching"!==e.state.fetchStatus||l.current.has(n)||l.current.set(n,Date.now()),"success"===r&&o>t.lastDataUpdatedAt){t.total++,t.successful++,t.lastDataUpdatedAt=o;const e=l.current.get(n);if(e&&o>0){const n=o-e;n>0&&n<6e4&&(t.responseTimes.push(n),t.responseTimes.length>5&&t.responseTimes.shift())}else if(o>0){const e=t.responseTimes.length>0?t.responseTimes[t.responseTimes.length-1]:1e3;t.responseTimes.push(e),t.responseTimes.length>5&&t.responseTimes.shift()}l.current.delete(n),s.current.set(n,t)}else"error"===r&&r!==t.lastStatus?(t.total++,t.failed++,t.lastStatus=r,l.current.delete(n),s.current.set(n,t)):r!==t.lastStatus&&(t.lastStatus=r,s.current.set(n,t))}));let t=0,r=0,o=0,i=0,a=0,c=null;const d=s.current.get("peers");d&&(t=d.total,r=d.successful,o=d.failed,i=d.responseTimes.reduce(((e,n)=>e+n),0),a=d.responseTimes.length),n.forEach(((e,n)=>{"error"!==e.state.status||c||(c=e.state.error)}));const u=a>0?i/a:0;let h=t>0?r/t:1;if(u>0&&(u>5e3?h*=.5:u>2500?h*=.7:u<1e3&&(h*=1.1)),o>0){h*=Math.pow(.8,o)}h=Math.max(0,Math.min(1,h));let m="excellent";return h<.5?m="poor":h<.8?m="moderate":h<.95&&(m="good"),{quality:h,status:m,totalQueries:t,successfulQueries:r,failedQueries:o,averageResponseTime:u,lastError:c}}),[e,n])};var tr,rr,or,sr,lr,ir,ar,cr;const dr=i.ZP.div(tr||(tr=(0,r.Z)(["\n  color: ",";\n  margin: "," 0;\n  font-weight: ",";\n  font-size: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.error}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.typography.weights.medium}),(e=>{let{theme:n}=e;return n.typography.sizes.medium})),ur=i.ZP.div(rr||(rr=(0,r.Z)(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  padding: ",";\n  margin: "," 0;\n"])),(e=>{let{theme:n}=e;return n.colors.background.base}),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.medium})),hr=i.ZP.div(or||(or=(0,r.Z)(["\n  font-weight: ",";\n  color: ",";\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.typography.weights.medium}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.small})),mr=i.ZP.div(sr||(sr=(0,r.Z)(["\n  color: ",";\n  font-size: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.typography.sizes.small})),pr=i.ZP.div(lr||(lr=(0,r.Z)(["\n  display: flex;\n  gap: ",";\n  justify-content: flex-end;\n  margin-top: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.large})),xr=i.ZP.div(ir||(ir=(0,r.Z)(["\n  color: ",";\n  font-size: ",";\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.spacing.medium})),gr=i.ZP.ul(ar||(ar=(0,r.Z)(["\n  margin: "," 0;\n  padding-left: ",";\n  color: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.text.muted})),vr=i.ZP.li(cr||(cr=(0,r.Z)(["\n  margin-bottom: ",";\n  line-height: 1.4;\n"])),(e=>{let{theme:n}=e;return n.spacing.small})),fr=e=>{var n,t;let{isOpen:r,onClose:s,onConfirm:l,peer:i}=e;const[a,c]=(0,o.useState)(!1);return r&&i?(0,j.jsx)(R.ZA,{onClick:s,children:(0,j.jsxs)(R.hz,{onClick:e=>e.stopPropagation(),children:[(0,j.jsxs)(R.xB,{children:[(0,j.jsx)(R.r6,{children:"Remove Network Peer"}),(0,j.jsx)(R.PZ,{onClick:s,children:"\xd7"})]}),(0,j.jsx)(dr,{children:"\u26a0\ufe0f Warning: This will permanently remove the peer from your network."}),(0,j.jsxs)(ur,{children:[(0,j.jsx)(hr,{children:i.name||i.id||"Unknown Peer"}),(0,j.jsxs)(mr,{children:[(0,j.jsxs)("div",{children:["IP Address: ",i.ip||"N/A"]}),(0,j.jsxs)("div",{children:["Status: ",i.connected?"Connected":"Disconnected"]}),(null===(n=i.location)||void 0===n?void 0:n.latitude)&&(null===(t=i.location)||void 0===t?void 0:t.longitude)&&(0,j.jsxs)("div",{children:["Location: ",i.location.latitude.toFixed(6),", ",i.location.longitude.toFixed(6)]})]})]}),(0,j.jsxs)(xr,{children:["This action will:",(0,j.jsxs)(gr,{children:[(0,j.jsx)(vr,{children:"Remove the peer from your network configuration"}),(0,j.jsx)(vr,{children:"Disconnect the peer from the VPN"}),(0,j.jsx)(vr,{children:"Require the peer to be re-added if you want to reconnect"})]})]}),(0,j.jsxs)(pr,{children:[(0,j.jsx)(R.zx,{onClick:s,disabled:a,children:"Cancel"}),(0,j.jsx)(R.zx,{onClick:async()=>{c(!0);try{await l(),s()}catch(e){console.error("Failed to delete peer:",e)}finally{c(!1)}},$danger:!0,disabled:a,children:a?"Removing...":"Remove Peer"})]})]})}):null};var jr,br,yr,wr,Pr,kr,Zr;const Sr=i.ZP.a(jr||(jr=(0,r.Z)(["\n  color: ",";\n  text-decoration: none;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: underline;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.accent})),Cr=i.ZP.button(br||(br=(0,r.Z)(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: ",";\n  padding: 0;\n  font-size: ",";\n\n  &:hover {\n    color: ",";\n  }\n\n  svg {\n    width: 1.2em;\n    height: 1.2em;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.typography.sizes.small}),(e=>{let{theme:n}=e;return n.colors.text.primary})),_r=i.ZP.div(yr||(yr=(0,r.Z)(["\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: ",";\n"])),(e=>{let{$quality:n}=e;return n>=.8?"#28a745":n>=.5?"#ffc107":"#dc3545"})),Ir=i.ZP.div(wr||(wr=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 16px;\n  margin-top: 16px;\n  border-top: 1px solid ",";\n  background: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.colors.background.surface})),Rr=i.ZP.div(Pr||(Pr=(0,r.Z)(["\n  font-size: 12px;\n  color: ",";\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-weight: 500;\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted})),zr=i.ZP.div(kr||(kr=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  color: ",";\n  font-weight: 500;\n  cursor: help;\n  position: relative;\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary})),Er=i.ZP.div(Zr||(Zr=(0,r.Z)(["\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  padding: 12px;\n  font-size: 12px;\n  color: ",";\n  white-space: nowrap;\n  z-index: 1000;\n  box-shadow: ",";\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;\n  pointer-events: none;\n  width: 500px;\n  white-space: normal;\n  text-align: center;\n\n  ",":hover & {\n    opacity: 1;\n    visibility: visible;\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    border: 5px solid transparent;\n    border-top-color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.shadows.medium}),zr,(e=>{let{theme:n}=e;return n.colors.border})),Tr=()=>{const e=(0,s.I0)(),{userInfo:n}=(0,c.a)(),{userId:t}=n,{roles:r}=n||[],l=null===r||void 0===r?void 0:r.includes("admin"),{canAccessPeers:i,shouldShowRestrictedContent:a}=(0,d.j)(),{isPollingPaused:u}=(0,f.h)(),[h,m]=(0,o.useState)(!1),[p,x]=(0,o.useState)(!1),[g,v]=(0,o.useState)(null),{data:b,isLoading:y,isError:w,error:P}=er({pausePolling:u}),k=(0,s.v9)((e=>e.warhammer.data.info))||{},Z=nr(),S=e=>e.connected?"connected":"disconnected",C=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return e?"number"===typeof e?e.toFixed(n):e:0},z=e=>{var n,t,r,o,s;if(null===(n=e.location)||void 0===n||!n.latitude||null===(t=e.location)||void 0===t||!t.longitude)return"N/A";let l="".concat(C(null===e||void 0===e||null===(r=e.location)||void 0===r?void 0:r.latitude),", ").concat(C(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)),i=null!==e&&void 0!==e&&null!==(s=e.location)&&void 0!==s&&s.last_update?"GPS updated ".concat(e.location.last_update):"";if(h)try{var a,c;l=Xt.eH([null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude,null===e||void 0===e||null===(c=e.location)||void 0===c?void 0:c.latitude])}catch(P){return console.error("Failed to convert to MGRS:",P),"Invalid coordinates"}return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Sr,{href:"#",onClick:n=>((e,n)=>{n.preventDefault(),Jt.fitToPeer(e)})(e,n),title:i,children:l})})};return i?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(L,{id:"peers-table",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(q,{children:(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:"Peer Name"})}),(0,j.jsx)(q,{children:"WARHAMMER IP"}),(0,j.jsx)(q,{children:"Status"}),(0,j.jsx)(q,{children:(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["Location",(0,j.jsxs)(Cr,{onClick:()=>m(!h),title:h?"Show Coordinates":"Show MGRS",children:[h?(0,j.jsx)(I.X$5,{}):(0,j.jsx)(I.gU9,{}),h?"MGRS":"Coords"]})]})}),l&&a(r)&&(0,j.jsx)(q,{children:"Actions"})]})}),(0,j.jsx)("tbody",{children:b&&0!==b.length?_().map(b,(e=>{var n;const t=null===(n=e.name)||void 0===n?void 0:n.toLowerCase().startsWith("wh-r");return(0,j.jsxs)(B,{className:e.name===k.name?"current-peer":"",children:[(0,j.jsxs)(H,{children:[(0,j.jsx)(G,{$status:S(e)}),(e.name||e.id||"Unknown").toUpperCase()]}),(0,j.jsx)(H,{children:e.ip?t?e.ip:(0,j.jsx)("a",{href:"http://".concat(e.ip,"/management"),target:"_blank",rel:"noopener noreferrer",children:e.ip}):"N/A"}),(0,j.jsx)(H,{children:e.connected?"Connected":"Disconnected"}),(0,j.jsx)(H,{children:z(e)}),l&&a(r)&&(0,j.jsx)(H,{children:!t&&(0,j.jsx)(R.zx,{onClick:()=>(e=>{v(e),x(!0)})(e),children:"Remove Peer"})})]},e.id||e.name)})):(0,j.jsx)(B,{children:(0,j.jsx)(H,{colSpan:l&&a(r)?5:4,children:y?"Loading peers...":w?"Error: ".concat((null===P||void 0===P?void 0:P.message)||"Failed to load peers"):"No Peers"})})})]}),(0,j.jsxs)(Ir,{children:[(0,j.jsx)(Rr,{children:"Warhammer Network Quality:"}),(0,j.jsxs)(zr,{$quality:(null===Z||void 0===Z?void 0:Z.quality)||0,children:[(0,j.jsx)(_r,{$quality:(null===Z||void 0===Z?void 0:Z.quality)||0}),Math.round(100*((null===Z||void 0===Z?void 0:Z.quality)||0)),"%",(0,j.jsxs)(Er,{children:[(0,j.jsx)("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Network Quality Calculation"}),(0,j.jsxs)("div",{children:["\u2022 Success Rate: ",(null===Z||void 0===Z?void 0:Z.totalQueries)>0?(((null===Z||void 0===Z?void 0:Z.successfulQueries)||0)/((null===Z||void 0===Z?void 0:Z.totalQueries)||1)*100).toFixed(1):100,"% successful"]}),(0,j.jsxs)("div",{children:["\u2022 Response Time: ",null!==Z&&void 0!==Z&&Z.averageResponseTime?Z.averageResponseTime.toFixed(0):0,"ms average (last 5 requests)"]}),(0,j.jsx)("div",{children:"\u2022 Quality Score: Based on success rate, response times, and failure penalties"}),(0,j.jsx)("div",{style:{fontSize:"10px",marginTop:"4px",opacity:.7},children:"Rolling average of last 5 requests | Green: \u226580% | Yellow: 50-79% | Red: <50%"})]})]})]}),(0,j.jsx)(fr,{isOpen:p,onClose:()=>{x(!1),v(null)},onConfirm:async()=>{g&&(await e((0,K.z5)(g.id||g.name)),v(null))},peer:g})]}):null};var Nr=t(8559),Ar=t.n(Nr);t(3666);delete Ar().Icon.Default.prototype._getIconUrl,Ar().Icon.Default.mergeOptions({iconRetinaUrl:t(6431),iconUrl:t(7093),shadowUrl:t(8858)});const Dr={current:null,fitToPeer:e=>{var n,t;Dr.current&&null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.latitude&&null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.longitude&&Dr.current.setView([e.location.latitude,e.location.longitude],15,{animate:!0})}},Mr={basic:"Basic",dark:"Dark",light:"Light",satellite:"Satellite"},Ur={basic:"http://localhost:3001/tiles/basic/{z}/{x}/{y}.png",dark:"http://localhost:3001/tiles/dark/{z}/{x}/{y}.png",light:"http://localhost:3001/tiles/light/{z}/{x}/{y}.png",satellite:"http://localhost:3001/tiles/satellite/{z}/{x}/{y}.png"},Fr={basic:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",dark:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",light:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",satellite:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"},Lr=(e,n)=>{const t=n?"#007bff":e.connected?"#4CAF50":"#ff4444";return Ar().divIcon({className:"custom-marker",html:'\n      <div style="\n        width: '.concat(n?"16px":"12px","; \n        height: ").concat(n?"16px":"12px","; \n        background: ").concat(t,'; \n        border-radius: 50%; \n        border: 2px solid white; \n        box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);\n        position: relative;\n      ">\n        <div style="\n          position: absolute;\n          top: -20px;\n          left: 50%;\n          transform: translateX(-50%);\n          background: rgba(0, 0, 0, 0.8);\n          color: white;\n          padding: 2px 6px;\n          border-radius: 4px;\n          font-size: 10px;\n          white-space: nowrap;\n          z-index: 1000;\n        ">').concat(e.name||"Unknown","</div>\n      </div>\n    "),iconSize:[n?16:12,n?16:12],iconAnchor:[n?8:6,n?8:6]})},Or=()=>{const e=(0,o.useRef)(null),n=(0,o.useRef)(null),t=(0,s.v9)((e=>e.vpn.peers)),r=(0,s.v9)((e=>e.warhammer.data.info)),[l,i]=(0,o.useState)(!1),[a,c]=(0,o.useState)("basic"),d=(0,o.useRef)({}),[u,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!0),[x,g]=(0,o.useRef)(null),[v,f]=(0,o.useState)(!0);(0,o.useEffect)((()=>{const e=setTimeout((()=>{p(!1)}),750);return()=>clearTimeout(e)}),[]),(0,o.useEffect)((()=>{if(!m)return n.current||(n.current=Ar().map(e.current,{center:[0,0],zoom:1,zoomControl:!1,attributionControl:!1}),Dr.current=n.current,Ar().control.zoom({position:"topleft"}).addTo(n.current),b("basic")),()=>{n.current&&(Dr.current=null,Object.values(d.current).forEach((e=>e.remove())),n.current.remove(),n.current=null)}}),[m]);const b=async e=>{if(!n.current)return;x.current&&n.current.removeLayer(x.current);const t=await(async e=>{try{const n=Ur[e].replace("{z}","0").replace("{x}","0").replace("{y}","0");return(await fetch(n,{method:"HEAD"})).ok}catch(n){return!1}})(e);t?(x.current=Ar().tileLayer(Ur[e],{attribution:"Local Tiles",maxZoom:18}),f(!1)):(x.current=Ar().tileLayer(Fr[e],{attribution:"\xa9 OpenStreetMap contributors",maxZoom:18,subdomains:"basic"===e?"abc":"abcd"}),f(!0)),x.current.addTo(n.current)},y=()=>{if(!n.current||null===t||void 0===t||!t.length)return;const e=Ar().latLngBounds();let r=!1;t.forEach((n=>{var t,o;null!==(t=n.location)&&void 0!==t&&t.latitude&&null!==(o=n.location)&&void 0!==o&&o.longitude&&(e.extend([n.location.latitude,n.location.longitude]),r=!0)})),r&&n.current.fitBounds(e,{padding:[50,50],maxZoom:15})};return(0,o.useEffect)((()=>{n.current&&n.current&&(Object.values(d.current).forEach((e=>e.remove())),d.current={},t.forEach((e=>{var t,o;if(null!==(t=e.location)&&void 0!==t&&t.latitude&&null!==(o=e.location)&&void 0!==o&&o.longitude){var s;const t=(null===e||void 0===e?void 0:e.name)===(null===r||void 0===r?void 0:r.name),o=Ar().marker([e.location.latitude,e.location.longitude],{icon:Lr(e,t)}).addTo(n.current),l=Ar().popup({closeButton:!1,closeOnClick:!1,offset:[0,-25],className:"custom-popup"}).setHTML('\n          <div class="popup-content">\n            <h3>'.concat(e.name||"Unknown","</h3>\n            <p>IP: ").concat(e.ip||"N/A","</p>\n            <p>Status: ").concat(e.connected?"Connected":"Disconnected","</p>\n            <p>Last Update: ").concat((null===(s=e.location)||void 0===s?void 0:s.last_update)||"N/A","</p>\n          </div>\n        "));o.on("mouseover",(()=>{o.bindPopup(l).openPopup()})),o.on("mouseout",(()=>{o.closePopup()})),d.current[e.id]=o}}))),n.current&&!u&&(null===t||void 0===t?void 0:t.length)>0&&(y(),h(!0))}),[t,r,m]),(0,j.jsxs)(Gt,{ref:e,children:[m&&(0,j.jsx)(Qt.Z,{message:"Loading Network..."}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"10px",left:"10px"},children:(0,j.jsx)("div",{style:{padding:"5px 10px",fontSize:"12px",color:v?"#ffa500":"#4CAF50",backgroundColor:"rgba(0,0,0,0.7)",borderRadius:"4px"},children:v?"Online Tiles":"Local Tiles"})}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"50px",right:"10px"},children:(0,j.jsx)("button",{onClick:()=>{document.fullscreenElement?(document.exitFullscreen(),i(!1)):(e.current.requestFullscreen(),i(!0))},title:"Toggle Fullscreen",children:l?(0,j.jsx)(I.Gbj,{}):(0,j.jsx)(I.ABE,{})})}),(0,j.jsx)(Kt,{className:"mapboxgl-ctrl mapboxgl-ctrl-group",style:{top:"90px",right:"10px"},children:(0,j.jsx)("button",{onClick:y,title:"Reset Map View",children:(0,j.jsx)(I.Bw1,{})})}),(0,j.jsx)(Wt,{children:(0,j.jsx)("select",{value:a,onChange:async e=>{const n=e.target.value;c(n),await b(n)},children:Object.entries(Mr).map((e=>{let[n,t]=e;return(0,j.jsx)("option",{value:n,children:t},n)}))})})]})},qr=()=>{const[e,n]=(0,o.useState)(null),[t,r]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{(async()=>{try{const e="pk.eyJ1Ijoiam1jY3VsbG91Z2g0IiwiYSI6ImNtMGJvaDUxNjBhYnkybHByd2ZycGMxbWEifQ.L_lcOTqwvBjD6TgLJqF1ZA";if(!e)return console.warn("Mapbox token not found, using fallback map"),n(!1),void r(!1);const t="https://api.mapbox.com/styles/v1/mapbox/dark-v11?access_token="+e;(await fetch(t,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok?n(!0):(console.warn("Mapbox API not responding, using fallback map"),n(!1))}catch(e){console.warn("Mapbox check failed, using fallback map:",e),n(!1)}finally{r(!1)}})()}),[]),t?(0,j.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,j.jsx)(Qt.Z,{message:"Checking map availability..."})}):e?(0,j.jsx)(Yt,{}):(0,j.jsx)(Or,{})};var Br,Hr,Gr,Kr,Wr;i.ZP.div(Br||(Br=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n  background-color: ",";\n  color: ",";\n  font-family: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.background.base}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.fonts.primary}));const Qr=i.ZP.div(Hr||(Hr=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  flex-grow: 1;\n  width: 100%;\n  padding: "," ",";\n  padding-top: 80px;\n  padding-bottom: 60px;\n  gap: 30px;\n  overflow: hidden;\n\n  @media (max-width: ",") {\n    flex-direction: column;\n  }\n"])),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.breakpoints.tablet})),Jr=i.ZP.div(Gr||(Gr=(0,r.Z)(["\n  background-color: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  padding: ",";\n  overflow: hidden;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: ",") {\n    width: 100%;\n    flex: none;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.shadows.card}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.breakpoints.tablet})),Vr=(0,i.ZP)(Jr)(Kr||(Kr=(0,r.Z)(["\n  // Inherits styles from TableContainer but can be customized if needed\n"]))),$r=i.ZP.div(Wr||(Wr=(0,r.Z)(["\n  flex: 1;\n  overflow-y: auto;\n"])));var Yr,Xr,eo,no,to,ro=t(3420);const oo=i.ZP.div(Yr||(Yr=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  background: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.background.base})),so=i.ZP.div(Xr||(Xr=(0,r.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: ",";\n"])),(e=>{let{theme:n}=e;return n.colors.background.base})),lo=i.ZP.footer(eo||(eo=(0,r.Z)(["\n  padding: "," ",";\n  background: ",";\n  color: ",";\n  border-top: 1px solid ",";\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  font-size: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.typography.sizes.small})),io=(0,i.ZP)(a.Ix)(no||(no=(0,r.Z)(["\n  .Toastify__toast {\n    background: ",";\n    color: ",";\n    border: 1px solid ",";\n  }\n  \n  .Toastify__toast-body {\n    font-family: ",";\n  }\n\n  .Toastify__progress-bar {\n    background: ",";\n  }\n\n  .Toastify__close-button {\n    color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.colors.border}),(e=>{let{theme:n}=e;return n.typography.fontFamily}),(e=>{let{theme:n}=e;return n.colors.accent}),(e=>{let{theme:n}=e;return n.colors.text.muted})),ao=i.ZP.div(to||(to=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: ",";\n  text-align: center;\n  padding: ",";\n  \n  h2 {\n    margin-bottom: ",";\n    color: ",";\n  }\n  \n  p {\n    margin-bottom: ",";\n    max-width: 500px;\n    line-height: 1.5;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.small})),co=()=>{const{authToken:e,vpnUnavailable:n}=(0,c.a)(),{canAccessPeers:t,canAccessMap:r,getLicenseMessage:i}=(0,d.j)(),a=(0,s.I0)();return(0,o.useEffect)((()=>{a((0,ro.HG)())}),[a]),e?(0,j.jsxs)(oo,{children:[(0,j.jsx)(io,{}),(0,j.jsx)(Pt,{}),(0,j.jsx)(so,{children:(0,j.jsx)(Qr,{children:t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Jr,{children:(0,j.jsx)($r,{children:(0,j.jsx)(Tr,{})})}),(0,j.jsx)(Vr,{children:r&&!n&&(0,j.jsx)(qr,{})})]}):(0,j.jsx)(Vr,{children:(0,j.jsxs)(ao,{children:[(0,j.jsx)("h2",{children:"License Required"}),(0,j.jsx)("p",{children:i()}),(0,j.jsx)("p",{children:"Please go to Config \u2192 License Management to activate your license and access all features."})]})})})}),(0,j.jsx)(lo,{children:(0,j.jsx)(Mt,{})})]}):(0,j.jsx)(l.Fg,{to:"/login"})}},5085:(e,n,t)=>{t.d(n,{Hr:()=>z,II:()=>_,KR:()=>E,PZ:()=>P,Ph:()=>I,RJ:()=>Z,ZA:()=>j,__:()=>C,c1:()=>k,cw:()=>S,hz:()=>b,r6:()=>w,xB:()=>y,zx:()=>R});var r,o,s,l,i,a,c,d,u,h,m,p,x,g,v=t(168),f=t(5867);const j=f.ZP.div(r||(r=(0,v.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  padding-top: 80px;\n  z-index: 1000;\n"]))),b=f.ZP.div(o||(o=(0,v.Z)(["\n  background: ",";\n  padding: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  width: 80%;\n  max-height: calc(100vh - 120px);\n  overflow-y: auto;\n  position: relative;\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.shadows.card})),y=f.ZP.div(s||(s=(0,v.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large})),w=f.ZP.h2(l||(l=(0,v.Z)(["\n  margin: 0;\n  color: ",";\n  font-size: 1.2em;\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary})),P=f.ZP.button(i||(i=(0,v.Z)(["\n  background: none;\n  border: none;\n  color: ",";\n  cursor: pointer;\n  font-size: 1.5em;\n  padding: 0;\n  \n  &:hover {\n    color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.text.muted}),(e=>{let{theme:n}=e;return n.colors.text.primary})),k=f.ZP.div(a||(a=(0,v.Z)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: ",";\n  margin-top: ",";\n"])),(e=>e.singlePane?"1fr":"1fr 2fr"),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.spacing.large})),Z=f.ZP.div(c||(c=(0,v.Z)(["\n  background: ",";\n  border-radius: ",";\n  padding: ",";\n\n  h3 {\n    color: ",";\n    font-size: 1em;\n    font-weight: 500;\n    letter-spacing: 1px;\n    margin-bottom: ",";\n  }\n\n  form {\n    margin-bottom: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.base}),(e=>{let{theme:n}=e;return n.borderRadius.default}),(e=>{let{theme:n}=e;return n.spacing.large}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.spacing.medium}),(e=>{let{theme:n}=e;return n.spacing.large})),S=f.ZP.div(d||(d=(0,v.Z)(["\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.medium})),C=f.ZP.label(u||(u=(0,v.Z)(["\n  display: block;\n  margin-bottom: 4px;\n  color: ",";\n  font-size: 0.85em;\n"])),(e=>{let{theme:n}=e;return n.colors.text.primary})),_=f.ZP.input(h||(h=(0,v.Z)(["\n  width: 100%;\n  padding: 8px 12px;\n  background: ",";\n  border: 1px solid #444;\n  border-radius: 6px;\n  color: ",";\n  font-family: ",";\n  font-size: 0.9em;\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.fonts.primary}),(e=>{let{theme:n}=e;return n.colors.accent})),I=f.ZP.select(m||(m=(0,v.Z)(["\n  width: 100%;\n  padding: 8px 12px;\n  background: ",";\n  border: 1px solid #444;\n  border-radius: 6px;\n  color: ",";\n  font-family: ",";\n  font-size: 0.9em;\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  option {\n    background: ",";\n    color: ",";\n    padding: 8px;\n  }\n"])),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary}),(e=>{let{theme:n}=e;return n.fonts.primary}),(e=>{let{theme:n}=e;return n.colors.accent}),(e=>{let{theme:n}=e;return n.colors.background.surface}),(e=>{let{theme:n}=e;return n.colors.text.primary})),R=f.ZP.button(p||(p=(0,v.Z)(["\n  padding: 8px 16px;\n  background: ",";\n  border: 0px solid;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  font-weight: ",";\n  font-size: 0.85em;\n  font-family: ",";\n  letter-spacing: 0.5px;\n  text-transform: uppercase;\n  margin-right: ",";\n  \n  &:hover {\n    opacity: 0.9;\n    background: ",";\n  }\n  \n  &:disabled {\n    background: #444;\n    border-color: #444;\n    cursor: not-allowed;\n  }\n"])),(e=>e.$danger?e.theme.colors.text.error:e.theme.colors.accent),(e=>{let{theme:n}=e;return n.typography.weights.medium}),(e=>{let{theme:n}=e;return n.fonts.primary}),(e=>e.$last?"0":"8px"),(e=>e.$danger?e.theme.colors.text.error:e.theme.colors.accent)),z=f.ZP.hr(x||(x=(0,v.Z)(["\n  border: none;\n  border-top: 1px solid #444;\n  margin: "," 0 ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.small}),(e=>{let{theme:n}=e;return n.spacing.medium})),E=f.ZP.div(g||(g=(0,v.Z)(["\n  margin-bottom: ",";\n"])),(e=>{let{theme:n}=e;return n.spacing.large}))}}]);
//# sourceMappingURL=415.7d539f1f.chunk.js.map